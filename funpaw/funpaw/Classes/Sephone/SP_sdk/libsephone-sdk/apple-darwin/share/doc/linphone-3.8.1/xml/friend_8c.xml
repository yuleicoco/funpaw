<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.12">
  <compounddef id="friend_8c" kind="file" language="C++">
    <compoundname>friend.c</compoundname>
    <includes refid="sephonecore_8h" local="yes">sephonecore.h</includes>
    <includes refid="private_8h" local="yes">private.h</includes>
    <includes refid="spconfig_8h" local="yes">spconfig.h</includes>
      <sectiondef kind="define">
      <memberdef kind="define" id="friend_8c_1a55bd57e5b55125f7ec69d35eb600d5f7" prot="public" static="no">
        <name>key_compare</name>
        <param><defname>s1</defname></param>
        <param><defname>s2</defname></param>
        <initializer>strcmp(s1,s2)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" line="574" column="9" bodyfile="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" bodystart="574" bodyend="-1"/>
      </memberdef>
      </sectiondef>
      <sectiondef kind="func">
      <memberdef kind="function" id="group__buddy__list_1ga0dda27574e0a28535203c79c73209060" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>const char *</type>
        <definition>const char* sephone_online_status_to_string</definition>
        <argsstring>(SephoneOnlineStatus ss)</argsstring>
        <name>sephone_online_status_to_string</name>
        <param>
          <type><ref refid="group__buddy__list_1ga751cee710246d233b3a4e0ebd2840298" kindref="member">SephoneOnlineStatus</ref></type>
          <declname>ss</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Return humain readable presence status <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>ss</parametername>
</parameternamelist>
<parameterdescription>
<para></para></parameterdescription>
</parameteritem>
</parameterlist>
<xrefsect id="deprecated_1_deprecated000076"><xreftitle>Deprecated</xreftitle><xrefdescription><para>Use <ref refid="group__buddy__list_1ga30c3cda73719ed6ed548d1888f26cea6" kindref="member">SephonePresenceModel</ref>, <ref refid="group__buddy__list_1ga5a4f2d24bb7a1dcfee6cfe41ee5d2d88" kindref="member">SephonePresenceActivity</ref> and <ref refid="group__buddy__list_1ga27ed08602cbebfb8d433b48d1170b161" kindref="member">sephone_presence_activity_to_string()</ref> instead. </para></xrefdescription></xrefsect></para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" line="29" column="1" bodyfile="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" bodystart="29" bodyend="71"/>
      </memberdef>
      <memberdef kind="function" id="friend_8c_1a99c75ea0760bef911037ca09953ba9bd" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>static int friend_compare</definition>
        <argsstring>(const void *a, const void *b)</argsstring>
        <name>friend_compare</name>
        <param>
          <type>const void *</type>
          <declname>a</declname>
        </param>
        <param>
          <type>const void *</type>
          <declname>b</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" line="73" column="1" bodyfile="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" bodystart="73" bodyend="78"/>
      </memberdef>
      <memberdef kind="function" id="friend_8c_1a96c224a284d35c2060b67a6f5319e5cb" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>MSList *</type>
        <definition>MSList* sephone_find_friend_by_address</definition>
        <argsstring>(MSList *fl, const SephoneAddress *addr, SephoneFriend **lf)</argsstring>
        <name>sephone_find_friend_by_address</name>
        <param>
          <type>MSList *</type>
          <declname>fl</declname>
        </param>
        <param>
          <type>const <ref refid="group__sephone__address_1ga55f07568eee2ed418e36ed9781cf2e23" kindref="member">SephoneAddress</ref> *</type>
          <declname>addr</declname>
        </param>
        <param>
          <type><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> **</type>
          <declname>lf</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" line="81" column="1" bodyfile="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" bodystart="81" bodyend="89"/>
      </memberdef>
      <memberdef kind="function" id="friend_8c_1ada06f629548835e6eaf95c0094c54812" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> *</type>
        <definition>SephoneFriend* sephone_find_friend_by_inc_subscribe</definition>
        <argsstring>(MSList *l, SalOp *op)</argsstring>
        <name>sephone_find_friend_by_inc_subscribe</name>
        <param>
          <type>MSList *</type>
          <declname>l</declname>
        </param>
        <param>
          <type>SalOp *</type>
          <declname>op</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" line="91" column="1" bodyfile="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" bodystart="91" bodyend="98"/>
      </memberdef>
      <memberdef kind="function" id="friend_8c_1a7d9fc6dbac9dc910f8a18ab82ca18409" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> *</type>
        <definition>SephoneFriend* sephone_find_friend_by_out_subscribe</definition>
        <argsstring>(MSList *l, SalOp *op)</argsstring>
        <name>sephone_find_friend_by_out_subscribe</name>
        <param>
          <type>MSList *</type>
          <declname>l</declname>
        </param>
        <param>
          <type>SalOp *</type>
          <declname>op</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" line="100" column="1" bodyfile="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" bodystart="100" bodyend="108"/>
      </memberdef>
      <memberdef kind="function" id="friend_8c_1a934a93611b15c9398a4c896ad30ba7d6" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void __sephone_friend_do_subscribe</definition>
        <argsstring>(SephoneFriend *fr)</argsstring>
        <name>__sephone_friend_do_subscribe</name>
        <param>
          <type><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> *</type>
          <declname>fr</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" line="110" column="1" bodyfile="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" bodystart="110" bodyend="128"/>
      </memberdef>
      <memberdef kind="function" id="group__buddy__list_1ga55657aa5ea2ecfb3b387061869028e89" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> *</type>
        <definition>SephoneFriend* sephone_friend_new</definition>
        <argsstring>()</argsstring>
        <name>sephone_friend_new</name>
        <param>
          <type>void</type>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Contructor <simplesect kind="return"><para>a new empty <ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" line="130" column="1" bodyfile="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" bodystart="130" bodyend="136"/>
      </memberdef>
      <memberdef kind="function" id="group__buddy__list_1gac799b73ca9a88fcf685fad8c5d7af1a2" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> *</type>
        <definition>SephoneFriend* sephone_friend_new_with_address</definition>
        <argsstring>(const char *addr)</argsstring>
        <name>sephone_friend_new_with_address</name>
        <param>
          <type>const char *</type>
          <declname>addr</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Contructor same as <ref refid="group__buddy__list_1ga55657aa5ea2ecfb3b387061869028e89" kindref="member">sephone_friend_new()</ref> + <ref refid="group__buddy__list_1ga8e27f1bdf5b188381e923ef5a264ffcb" kindref="member">sephone_friend_set_address()</ref> <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>addr</parametername>
</parameternamelist>
<parameterdescription>
<para>a buddy address, must be a sip uri like sip:<ulink url="mailto:joe@sip.linphone.org">joe@sip.linphone.org</ulink> </para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>a new <ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> with <ref refid="group__buddy__list_1ga6e40fe5bfee602b8cedb37a62f3052cb" kindref="member">address initialized </ref> </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" line="138" column="1" bodyfile="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" bodystart="138" bodyend="150"/>
      </memberdef>
      <memberdef kind="function" id="group__buddy__list_1gafc7b6450bec5d85668363db0bb0f6560" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void sephone_friend_set_user_data</definition>
        <argsstring>(SephoneFriend *lf, void *data)</argsstring>
        <name>sephone_friend_set_user_data</name>
        <param>
          <type><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> *</type>
          <declname>lf</declname>
        </param>
        <param>
          <type>void *</type>
          <declname>data</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Store user pointer to friend object. </para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" line="152" column="1" bodyfile="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" bodystart="152" bodyend="154"/>
      </memberdef>
      <memberdef kind="function" id="group__buddy__list_1gaac5cbbcd154c06ae0dfb2242c36c37b9" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void *</type>
        <definition>void* sephone_friend_get_user_data</definition>
        <argsstring>(const SephoneFriend *lf)</argsstring>
        <name>sephone_friend_get_user_data</name>
        <param>
          <type>const <ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> *</type>
          <declname>lf</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Retrieve user data associated with friend. </para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" line="156" column="1" bodyfile="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" bodystart="156" bodyend="158"/>
      </memberdef>
      <memberdef kind="function" id="group__buddy__list_1gadf95ab03a87a9df7719f0d742b5e9d33" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>bool_t</type>
        <definition>bool_t sephone_friend_in_list</definition>
        <argsstring>(const SephoneFriend *lf)</argsstring>
        <name>sephone_friend_in_list</name>
        <param>
          <type>const <ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> *</type>
          <declname>lf</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Check that the given friend is in a friend list. <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">lf</parametername>
</parameternamelist>
<parameterdescription>
<para><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> object. </para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>TRUE if the friend is in a friend list, FALSE otherwise. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" line="160" column="1" bodyfile="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" bodystart="160" bodyend="162"/>
      </memberdef>
      <memberdef kind="function" id="group__buddy__list_1ga5780c6f6dda94c3962f2a5344d90447e" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void sephone_core_interpret_friend_uri</definition>
        <argsstring>(SephoneCore *lc, const char *uri, char **result)</argsstring>
        <name>sephone_core_interpret_friend_uri</name>
        <param>
          <type><ref refid="group__initializing_1ga1c39f5ce369d188892c11e63b93d66ca" kindref="member">SephoneCore</ref> *</type>
          <declname>lc</declname>
        </param>
        <param>
          <type>const char *</type>
          <declname>uri</declname>
        </param>
        <param>
          <type>char **</type>
          <declname>result</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para><xrefsect id="deprecated_1_deprecated000079"><xreftitle>Deprecated</xreftitle><xrefdescription><para>Use <ref refid="group__call__control_1gaeb30ce2d92edcbcdbc42e3c61a7b7240" kindref="member">sephone_core_interpret_url()</ref> instead </para></xrefdescription></xrefsect></para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" line="164" column="1" bodyfile="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" bodystart="164" bodyend="198"/>
      </memberdef>
      <memberdef kind="function" id="group__buddy__list_1ga8e27f1bdf5b188381e923ef5a264ffcb" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int sephone_friend_set_address</definition>
        <argsstring>(SephoneFriend *lf, const SephoneAddress *addr)</argsstring>
        <name>sephone_friend_set_address</name>
        <param>
          <type><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> *</type>
          <declname>fr</declname>
          <defname>lf</defname>
        </param>
        <param>
          <type>const <ref refid="group__sephone__address_1ga55f07568eee2ed418e36ed9781cf2e23" kindref="member">SephoneAddress</ref> *</type>
          <declname>address</declname>
          <defname>addr</defname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Set <ref refid="group__sephone__address_1ga55f07568eee2ed418e36ed9781cf2e23" kindref="member">SephoneAddress</ref> for this friend <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>fr</parametername>
</parameternamelist>
<parameterdescription>
<para><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> object </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>address</parametername>
</parameternamelist>
<parameterdescription>
<para><ref refid="group__sephone__address_1ga55f07568eee2ed418e36ed9781cf2e23" kindref="member">SephoneAddress</ref> </para></parameterdescription>
</parameteritem>
</parameterlist>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" line="200" column="1" bodyfile="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" bodystart="200" bodyend="206"/>
      </memberdef>
      <memberdef kind="function" id="group__buddy__list_1ga68cbe064b48316810a5fb251d45cd5f8" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int sephone_friend_set_name</definition>
        <argsstring>(SephoneFriend *lf, const char *name)</argsstring>
        <name>sephone_friend_set_name</name>
        <param>
          <type><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> *</type>
          <declname>lf</declname>
        </param>
        <param>
          <type>const char *</type>
          <declname>name</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Set the display name for this friend <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>lf</parametername>
</parameternamelist>
<parameterdescription>
<para><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> object </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>name</parametername>
</parameternamelist>
<parameterdescription>
<para></para></parameterdescription>
</parameteritem>
</parameterlist>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" line="208" column="1" bodyfile="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" bodystart="208" bodyend="216"/>
      </memberdef>
      <memberdef kind="function" id="group__buddy__list_1ga3155f520c95b024ddb6f2918c0763857" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int sephone_friend_enable_subscribes</definition>
        <argsstring>(SephoneFriend *fr, bool_t val)</argsstring>
        <name>sephone_friend_enable_subscribes</name>
        <param>
          <type><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> *</type>
          <declname>fr</declname>
        </param>
        <param>
          <type>bool_t</type>
          <declname>val</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Configure <ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> to subscribe to presence information <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>fr</parametername>
</parameternamelist>
<parameterdescription>
<para><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> object </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>val</parametername>
</parameternamelist>
<parameterdescription>
<para>if TRUE this friend will receive subscription message </para></parameterdescription>
</parameteritem>
</parameterlist>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" line="218" column="1" bodyfile="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" bodystart="218" bodyend="221"/>
      </memberdef>
      <memberdef kind="function" id="group__buddy__list_1ga2a06db1ee3bb318d911f3b7c8fa9c5d4" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int sephone_friend_set_inc_subscribe_policy</definition>
        <argsstring>(SephoneFriend *fr, SephoneSubscribePolicy pol)</argsstring>
        <name>sephone_friend_set_inc_subscribe_policy</name>
        <param>
          <type><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> *</type>
          <declname>fr</declname>
        </param>
        <param>
          <type><ref refid="group__buddy__list_1ga913a5506d8bd5d530d8a5ad92d5fd75c" kindref="member">SephoneSubscribePolicy</ref></type>
          <declname>pol</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Configure incoming subscription policy for this friend. <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>fr</parametername>
</parameternamelist>
<parameterdescription>
<para><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> object </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>pol</parametername>
</parameternamelist>
<parameterdescription>
<para><ref refid="group__buddy__list_1ga913a5506d8bd5d530d8a5ad92d5fd75c" kindref="member">SephoneSubscribePolicy</ref> policy to apply. </para></parameterdescription>
</parameteritem>
</parameterlist>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" line="223" column="1" bodyfile="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" bodystart="223" bodyend="227"/>
      </memberdef>
      <memberdef kind="function" id="friend_8c_1a9acfd3a9ad65d6a1ecdbf16a3ae81fc7" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void sephone_friend_notify</definition>
        <argsstring>(SephoneFriend *lf, SephonePresenceModel *presence)</argsstring>
        <name>sephone_friend_notify</name>
        <param>
          <type><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> *</type>
          <declname>lf</declname>
        </param>
        <param>
          <type><ref refid="group__buddy__list_1ga30c3cda73719ed6ed548d1888f26cea6" kindref="member">SephonePresenceModel</ref> *</type>
          <declname>presence</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" line="229" column="1" bodyfile="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" bodystart="229" bodyend="236"/>
      </memberdef>
      <memberdef kind="function" id="friend_8c_1a992a4983adc034a85d030b2192a4a1e8" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>static void sephone_friend_unsubscribe</definition>
        <argsstring>(SephoneFriend *lf)</argsstring>
        <name>sephone_friend_unsubscribe</name>
        <param>
          <type><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> *</type>
          <declname>lf</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" line="238" column="1" bodyfile="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" bodystart="238" bodyend="243"/>
      </memberdef>
      <memberdef kind="function" id="friend_8c_1a7697af178ed55df7aa44ee8d8998667a" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>static void sephone_friend_invalidate_subscription</definition>
        <argsstring>(SephoneFriend *lf)</argsstring>
        <name>sephone_friend_invalidate_subscription</name>
        <param>
          <type><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> *</type>
          <declname>lf</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" line="245" column="1" bodyfile="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" bodystart="245" bodyend="259"/>
      </memberdef>
      <memberdef kind="function" id="friend_8c_1ab7f0049050b8061ef7307ae9afc72630" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void sephone_friend_close_subscriptions</definition>
        <argsstring>(SephoneFriend *lf)</argsstring>
        <name>sephone_friend_close_subscriptions</name>
        <param>
          <type><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> *</type>
          <declname>lf</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" line="261" column="1" bodyfile="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" bodystart="261" bodyend="267"/>
      </memberdef>
      <memberdef kind="function" id="friend_8c_1aeea17c5f59f3811026652d2e112a5a01" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>static void _sephone_friend_destroy</definition>
        <argsstring>(SephoneFriend *lf)</argsstring>
        <name>_sephone_friend_destroy</name>
        <param>
          <type><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> *</type>
          <declname>lf</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" line="269" column="1" bodyfile="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" bodystart="269" bodyend="281"/>
      </memberdef>
      <memberdef kind="function" id="group__buddy__list_1ga6e40fe5bfee602b8cedb37a62f3052cb" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>const <ref refid="group__sephone__address_1ga55f07568eee2ed418e36ed9781cf2e23" kindref="member">SephoneAddress</ref> *</type>
        <definition>const SephoneAddress* sephone_friend_get_address</definition>
        <argsstring>(const SephoneFriend *lf)</argsstring>
        <name>sephone_friend_get_address</name>
        <param>
          <type>const <ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> *</type>
          <declname>lf</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Get address of this friend <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>lf</parametername>
</parameternamelist>
<parameterdescription>
<para><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> object </para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para><ref refid="group__sephone__address_1ga55f07568eee2ed418e36ed9781cf2e23" kindref="member">SephoneAddress</ref> </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" line="283" column="1" bodyfile="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" bodystart="283" bodyend="285"/>
      </memberdef>
      <memberdef kind="function" id="group__buddy__list_1ga1c7453d9bc03bcca109e4a03857dc36e" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>const char *</type>
        <definition>const char* sephone_friend_get_name</definition>
        <argsstring>(const SephoneFriend *lf)</argsstring>
        <name>sephone_friend_get_name</name>
        <param>
          <type>const <ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> *</type>
          <declname>lf</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Get the display name for this friend <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>lf</parametername>
</parameternamelist>
<parameterdescription>
<para><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> object </para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>The display name of this friend </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" line="287" column="1" bodyfile="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" bodystart="287" bodyend="291"/>
      </memberdef>
      <memberdef kind="function" id="group__buddy__list_1gad478070e96beffe8a8197ded86332e64" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>bool_t</type>
        <definition>bool_t sephone_friend_subscribes_enabled</definition>
        <argsstring>(const SephoneFriend *lf)</argsstring>
        <name>sephone_friend_subscribes_enabled</name>
        <param>
          <type>const <ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> *</type>
          <declname>lf</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>get subscription flag value <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>lf</parametername>
</parameternamelist>
<parameterdescription>
<para><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> object </para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>returns true is subscription is activated for this friend </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" line="293" column="1" bodyfile="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" bodystart="293" bodyend="295"/>
      </memberdef>
      <memberdef kind="function" id="group__buddy__list_1ga5e21e1a8382337e4604b9d745605d866" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="group__buddy__list_1ga913a5506d8bd5d530d8a5ad92d5fd75c" kindref="member">SephoneSubscribePolicy</ref></type>
        <definition>SephoneSubscribePolicy sephone_friend_get_inc_subscribe_policy</definition>
        <argsstring>(const SephoneFriend *lf)</argsstring>
        <name>sephone_friend_get_inc_subscribe_policy</name>
        <param>
          <type>const <ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> *</type>
          <declname>lf</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>get current subscription policy for this <ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>lf</parametername>
</parameternamelist>
<parameterdescription>
<para><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> object </para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para><ref refid="group__buddy__list_1ga913a5506d8bd5d530d8a5ad92d5fd75c" kindref="member">SephoneSubscribePolicy</ref> </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" line="297" column="1" bodyfile="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" bodystart="297" bodyend="299"/>
      </memberdef>
      <memberdef kind="function" id="group__buddy__list_1gae04082c3d1e32e22bc58bea2ba8a08d2" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="group__buddy__list_1ga751cee710246d233b3a4e0ebd2840298" kindref="member">SephoneOnlineStatus</ref></type>
        <definition>SephoneOnlineStatus sephone_friend_get_status</definition>
        <argsstring>(const SephoneFriend *lf)</argsstring>
        <name>sephone_friend_get_status</name>
        <param>
          <type>const <ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> *</type>
          <declname>lf</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Get the status of a friend <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">lf</parametername>
</parameternamelist>
<parameterdescription>
<para>A <ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> object </para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para><ref refid="group__buddy__list_1ga751cee710246d233b3a4e0ebd2840298" kindref="member">SephoneOnlineStatus</ref> </para></simplesect>
<xrefsect id="deprecated_1_deprecated000075"><xreftitle>Deprecated</xreftitle><xrefdescription><para>Use <ref refid="group__buddy__list_1ga6e132b8f2c29525e24365ae946d8be6a" kindref="member">sephone_friend_get_presence_model()</ref> instead </para></xrefdescription></xrefsect></para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" line="301" column="1" bodyfile="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" bodystart="301" bodyend="379"/>
      </memberdef>
      <memberdef kind="function" id="group__buddy__list_1ga6e132b8f2c29525e24365ae946d8be6a" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>const <ref refid="group__buddy__list_1ga30c3cda73719ed6ed548d1888f26cea6" kindref="member">SephonePresenceModel</ref> *</type>
        <definition>const SephonePresenceModel* sephone_friend_get_presence_model</definition>
        <argsstring>(SephoneFriend *lf)</argsstring>
        <name>sephone_friend_get_presence_model</name>
        <param>
          <type><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> *</type>
          <declname>lf</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Get the presence model of a friend <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">lf</parametername>
</parameternamelist>
<parameterdescription>
<para>A <ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> object </para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>A <ref refid="group__buddy__list_1ga30c3cda73719ed6ed548d1888f26cea6" kindref="member">SephonePresenceModel</ref> object, or NULL if the friend do not have presence information (in which case he is considered offline) </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" line="381" column="1" bodyfile="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" bodystart="381" bodyend="383"/>
      </memberdef>
      <memberdef kind="function" id="group__buddy__list_1ga38952b5cdc45a8590193f1579591991c" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>BuddyInfo *</type>
        <definition>BuddyInfo* sephone_friend_get_info</definition>
        <argsstring>(const SephoneFriend *lf)</argsstring>
        <name>sephone_friend_get_info</name>
        <param>
          <type>const <ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> *</type>
          <declname>lf</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" line="385" column="1" bodyfile="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" bodystart="385" bodyend="387"/>
      </memberdef>
      <memberdef kind="function" id="friend_8c_1a0da702abf22309e9431f28a642d66765" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void sephone_friend_update_subscribes</definition>
        <argsstring>(SephoneFriend *fr, SephoneProxyConfig *proxy, bool_t only_when_registered)</argsstring>
        <name>sephone_friend_update_subscribes</name>
        <param>
          <type><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> *</type>
          <declname>fr</declname>
        </param>
        <param>
          <type><ref refid="group__proxies_1ga6de67319de408cf5e0994375df31f431" kindref="member">SephoneProxyConfig</ref> *</type>
          <declname>proxy</declname>
        </param>
        <param>
          <type>bool_t</type>
          <declname>only_when_registered</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" line="395" column="1" bodyfile="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" bodystart="395" bodyend="418"/>
      </memberdef>
      <memberdef kind="function" id="friend_8c_1aa436bf9b5ca32ed2b08c061855e40d58" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void sephone_friend_apply</definition>
        <argsstring>(SephoneFriend *fr, SephoneCore *lc)</argsstring>
        <name>sephone_friend_apply</name>
        <param>
          <type><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> *</type>
          <declname>fr</declname>
        </param>
        <param>
          <type><ref refid="group__initializing_1ga1c39f5ce369d188892c11e63b93d66ca" kindref="member">SephoneCore</ref> *</type>
          <declname>lc</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" line="420" column="1" bodyfile="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" bodystart="420" bodyend="452"/>
      </memberdef>
      <memberdef kind="function" id="group__buddy__list_1gaa816e1ffe0e2021e05e72e12f7356b0a" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void sephone_friend_edit</definition>
        <argsstring>(SephoneFriend *fr)</argsstring>
        <name>sephone_friend_edit</name>
        <param>
          <type><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> *</type>
          <declname>fr</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Starts editing a friend configuration.</para><para>Because friend configuration must be consistent, applications MUST call <ref refid="group__buddy__list_1gaa816e1ffe0e2021e05e72e12f7356b0a" kindref="member">sephone_friend_edit()</ref> before doing any attempts to modify friend configuration (such as <ref refid="group__buddy__list_1ga8e27f1bdf5b188381e923ef5a264ffcb" kindref="member">address </ref> or <ref refid="group__buddy__list_1ga2a06db1ee3bb318d911f3b7c8fa9c5d4" kindref="member">subscription policy</ref> and so on). Once the modifications are done, then the application must call <ref refid="group__buddy__list_1ga862cf6dbecb8284ad1ea5d249e955180" kindref="member">sephone_friend_done()</ref> to commit the changes. </para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" line="454" column="1" bodyfile="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" bodystart="454" bodyend="455"/>
      </memberdef>
      <memberdef kind="function" id="group__buddy__list_1ga862cf6dbecb8284ad1ea5d249e955180" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void sephone_friend_done</definition>
        <argsstring>(SephoneFriend *fr)</argsstring>
        <name>sephone_friend_done</name>
        <param>
          <type><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> *</type>
          <declname>fr</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Commits modification made to the friend configuration. <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>fr</parametername>
</parameternamelist>
<parameterdescription>
<para><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> object </para></parameterdescription>
</parameteritem>
</parameterlist>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" line="457" column="1" bodyfile="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" bodystart="457" bodyend="461"/>
      </memberdef>
      <memberdef kind="function" id="group__buddy__list_1ga0b5cb590a6b6c57c9a45dc26f314d8c3" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> *</type>
        <definition>SephoneFriend* sephone_core_create_friend</definition>
        <argsstring>(SephoneCore *lc)</argsstring>
        <name>sephone_core_create_friend</name>
        <param>
          <type><ref refid="group__initializing_1ga1c39f5ce369d188892c11e63b93d66ca" kindref="member">SephoneCore</ref> *</type>
          <declname>lc</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Create a default SephoneFriend. <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">lc</parametername>
</parameternamelist>
<parameterdescription>
<para><ref refid="group__initializing_1ga1c39f5ce369d188892c11e63b93d66ca" kindref="member">SephoneCore</ref> object </para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>The created <ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> object </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" line="463" column="1" bodyfile="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" bodystart="463" bodyend="465"/>
      </memberdef>
      <memberdef kind="function" id="group__buddy__list_1gadf04ea88cdcac931a728fdbe94adae79" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> *</type>
        <definition>SephoneFriend* sephone_core_create_friend_with_address</definition>
        <argsstring>(SephoneCore *lc, const char *address)</argsstring>
        <name>sephone_core_create_friend_with_address</name>
        <param>
          <type><ref refid="group__initializing_1ga1c39f5ce369d188892c11e63b93d66ca" kindref="member">SephoneCore</ref> *</type>
          <declname>lc</declname>
        </param>
        <param>
          <type>const char *</type>
          <declname>address</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Create a SephoneFriend from the given address. <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">lc</parametername>
</parameternamelist>
<parameterdescription>
<para><ref refid="group__initializing_1ga1c39f5ce369d188892c11e63b93d66ca" kindref="member">SephoneCore</ref> object </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">address</parametername>
</parameternamelist>
<parameterdescription>
<para>A string containing the address to create the SephoneFriend from </para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>The created <ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> object </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" line="467" column="1" bodyfile="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" bodystart="467" bodyend="469"/>
      </memberdef>
      <memberdef kind="function" id="group__buddy__list_1ga13b8aa7cb3599dbcbd6bb796def3c9ee" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void sephone_core_add_friend</definition>
        <argsstring>(SephoneCore *lc, SephoneFriend *lf)</argsstring>
        <name>sephone_core_add_friend</name>
        <param>
          <type><ref refid="group__initializing_1ga1c39f5ce369d188892c11e63b93d66ca" kindref="member">SephoneCore</ref> *</type>
          <declname>lc</declname>
        </param>
        <param>
          <type><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> *</type>
          <declname>fr</declname>
          <defname>lf</defname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Add a friend to the current buddy list, if <ref refid="group__buddy__list_1ga3155f520c95b024ddb6f2918c0763857" kindref="member">subscription attribute </ref> is set, a SIP SUBSCRIBE message is sent. <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>lc</parametername>
</parameternamelist>
<parameterdescription>
<para><ref refid="group__initializing_1ga1c39f5ce369d188892c11e63b93d66ca" kindref="member">SephoneCore</ref> object </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>fr</parametername>
</parameternamelist>
<parameterdescription>
<para><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> to add </para></parameterdescription>
</parameteritem>
</parameterlist>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" line="471" column="1" bodyfile="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" bodystart="471" bodyend="488"/>
      </memberdef>
      <memberdef kind="function" id="group__buddy__list_1gabaedfc6ebdcc23d1068d25e1b4c01a2c" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void sephone_core_remove_friend</definition>
        <argsstring>(SephoneCore *lc, SephoneFriend *fl)</argsstring>
        <name>sephone_core_remove_friend</name>
        <param>
          <type><ref refid="group__initializing_1ga1c39f5ce369d188892c11e63b93d66ca" kindref="member">SephoneCore</ref> *</type>
          <declname>lc</declname>
        </param>
        <param>
          <type><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> *</type>
          <declname>fr</declname>
          <defname>fl</defname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>remove a friend from the buddy list <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>lc</parametername>
</parameternamelist>
<parameterdescription>
<para><ref refid="group__initializing_1ga1c39f5ce369d188892c11e63b93d66ca" kindref="member">SephoneCore</ref> object </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>fr</parametername>
</parameternamelist>
<parameterdescription>
<para><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> to add </para></parameterdescription>
</parameteritem>
</parameterlist>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" line="490" column="1" bodyfile="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" bodystart="490" bodyend="499"/>
      </memberdef>
      <memberdef kind="function" id="friend_8c_1ac6ff1c033fa1d49cfacdc019a7a8b35f" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void sephone_core_update_friends_subscriptions</definition>
        <argsstring>(SephoneCore *lc, SephoneProxyConfig *cfg, bool_t only_when_registered)</argsstring>
        <name>sephone_core_update_friends_subscriptions</name>
        <param>
          <type><ref refid="group__initializing_1ga1c39f5ce369d188892c11e63b93d66ca" kindref="member">SephoneCore</ref> *</type>
          <declname>lc</declname>
        </param>
        <param>
          <type><ref refid="group__proxies_1ga6de67319de408cf5e0994375df31f431" kindref="member">SephoneProxyConfig</ref> *</type>
          <declname>cfg</declname>
        </param>
        <param>
          <type>bool_t</type>
          <declname>only_when_registered</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" line="501" column="1" bodyfile="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" bodystart="501" bodyend="507"/>
      </memberdef>
      <memberdef kind="function" id="friend_8c_1a5ae69a1d7b0b34968ac5a6981f221f87" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>bool_t</type>
        <definition>bool_t sephone_core_should_subscribe_friends_only_when_registered</definition>
        <argsstring>(const SephoneCore *lc)</argsstring>
        <name>sephone_core_should_subscribe_friends_only_when_registered</name>
        <param>
          <type>const <ref refid="group__initializing_1ga1c39f5ce369d188892c11e63b93d66ca" kindref="member">SephoneCore</ref> *</type>
          <declname>lc</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" line="509" column="1" bodyfile="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" bodystart="509" bodyend="511"/>
      </memberdef>
      <memberdef kind="function" id="friend_8c_1a0fc41e76af1f5a5c39ab4df75a62d28d" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void sephone_core_send_initial_subscribes</definition>
        <argsstring>(SephoneCore *lc)</argsstring>
        <name>sephone_core_send_initial_subscribes</name>
        <param>
          <type><ref refid="group__initializing_1ga1c39f5ce369d188892c11e63b93d66ca" kindref="member">SephoneCore</ref> *</type>
          <declname>lc</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" line="513" column="1" bodyfile="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" bodystart="513" bodyend="517"/>
      </memberdef>
      <memberdef kind="function" id="friend_8c_1a6b5cd3eacb441ac69925398efca77fa0" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void sephone_core_invalidate_friend_subscriptions</definition>
        <argsstring>(SephoneCore *lc)</argsstring>
        <name>sephone_core_invalidate_friend_subscriptions</name>
        <param>
          <type><ref refid="group__initializing_1ga1c39f5ce369d188892c11e63b93d66ca" kindref="member">SephoneCore</ref> *</type>
          <declname>lc</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" line="519" column="1" bodyfile="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" bodystart="519" bodyend="526"/>
      </memberdef>
      <memberdef kind="function" id="group__buddy__list_1gaf30225f59fa38a143f7d838219ce6e7f" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void sephone_friend_set_ref_key</definition>
        <argsstring>(SephoneFriend *lf, const char *key)</argsstring>
        <name>sephone_friend_set_ref_key</name>
        <param>
          <type><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> *</type>
          <declname>lf</declname>
        </param>
        <param>
          <type>const char *</type>
          <declname>key</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Set the reference key of a friend. <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">lf</parametername>
</parameternamelist>
<parameterdescription>
<para><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> object. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">key</parametername>
</parameternamelist>
<parameterdescription>
<para>The reference key to use for the friend. </para></parameterdescription>
</parameteritem>
</parameterlist>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" line="528" column="1" bodyfile="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" bodystart="528" bodyend="537"/>
      </memberdef>
      <memberdef kind="function" id="group__buddy__list_1gaf44896268a3c8e9ed2941cf6ea27b981" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>const char *</type>
        <definition>const char* sephone_friend_get_ref_key</definition>
        <argsstring>(const SephoneFriend *lf)</argsstring>
        <name>sephone_friend_get_ref_key</name>
        <param>
          <type>const <ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> *</type>
          <declname>lf</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Get the reference key of a friend. <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">lf</parametername>
</parameternamelist>
<parameterdescription>
<para><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> object. </para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>The reference key of the friend. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" line="539" column="1" bodyfile="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" bodystart="539" bodyend="541"/>
      </memberdef>
      <memberdef kind="function" id="group__buddy__list_1ga5db709107c46cff4601be65ed9543a4a" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> *</type>
        <definition>SephoneFriend* sephone_core_find_friend</definition>
        <argsstring>(const SephoneCore *lc, const SephoneAddress *addr)</argsstring>
        <name>sephone_core_find_friend</name>
        <param>
          <type>const <ref refid="group__initializing_1ga1c39f5ce369d188892c11e63b93d66ca" kindref="member">SephoneCore</ref> *</type>
          <declname>lc</declname>
        </param>
        <param>
          <type>const <ref refid="group__sephone__address_1ga55f07568eee2ed418e36ed9781cf2e23" kindref="member">SephoneAddress</ref> *</type>
          <declname>addr</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Search a SephoneFriend by its address. <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">lc</parametername>
</parameternamelist>
<parameterdescription>
<para><ref refid="group__initializing_1ga1c39f5ce369d188892c11e63b93d66ca" kindref="member">SephoneCore</ref> object. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">addr</parametername>
</parameternamelist>
<parameterdescription>
<para>The address to use to search the friend. </para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>The <ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> object corresponding to the given address. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" line="543" column="1" bodyfile="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" bodystart="543" bodyend="553"/>
      </memberdef>
      <memberdef kind="function" id="group__buddy__list_1ga02b14243ec4dbc68d5c3fd3d2517133a" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> *</type>
        <definition>SephoneFriend* sephone_core_get_friend_by_address</definition>
        <argsstring>(const SephoneCore *lc, const char *uri)</argsstring>
        <name>sephone_core_get_friend_by_address</name>
        <param>
          <type>const <ref refid="group__initializing_1ga1c39f5ce369d188892c11e63b93d66ca" kindref="member">SephoneCore</ref> *</type>
          <declname>lc</declname>
        </param>
        <param>
          <type>const char *</type>
          <declname>addr</declname>
          <defname>uri</defname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Search a SephoneFriend by its address. <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">lc</parametername>
</parameternamelist>
<parameterdescription>
<para><ref refid="group__initializing_1ga1c39f5ce369d188892c11e63b93d66ca" kindref="member">SephoneCore</ref> object. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">addr</parametername>
</parameternamelist>
<parameterdescription>
<para>The address to use to search the friend. </para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>The <ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> object corresponding to the given address. </para></simplesect>
<xrefsect id="deprecated_1_deprecated000080"><xreftitle>Deprecated</xreftitle><xrefdescription><para>use <ref refid="group__buddy__list_1ga5db709107c46cff4601be65ed9543a4a" kindref="member">sephone_core_find_friend()</ref> instead. </para></xrefdescription></xrefsect></para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" line="555" column="1" bodyfile="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" bodystart="555" bodyend="560"/>
      </memberdef>
      <memberdef kind="function" id="group__buddy__list_1gac68438dfa1663d5f49d610592972020e" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> *</type>
        <definition>SephoneFriend* sephone_core_get_friend_by_ref_key</definition>
        <argsstring>(const SephoneCore *lc, const char *key)</argsstring>
        <name>sephone_core_get_friend_by_ref_key</name>
        <param>
          <type>const <ref refid="group__initializing_1ga1c39f5ce369d188892c11e63b93d66ca" kindref="member">SephoneCore</ref> *</type>
          <declname>lc</declname>
        </param>
        <param>
          <type>const char *</type>
          <declname>key</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Search a SephoneFriend by its reference key. <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">lc</parametername>
</parameternamelist>
<parameterdescription>
<para><ref refid="group__initializing_1ga1c39f5ce369d188892c11e63b93d66ca" kindref="member">SephoneCore</ref> object. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername direction="in">key</parametername>
</parameternamelist>
<parameterdescription>
<para>The reference key to use to search the friend. </para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>The <ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> object corresponding to the given reference key. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" line="562" column="1" bodyfile="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" bodystart="562" bodyend="572"/>
      </memberdef>
      <memberdef kind="function" id="friend_8c_1abf82f0e9de7f76aa8e2c78ecc69555bf" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="group__buddy__list_1ga913a5506d8bd5d530d8a5ad92d5fd75c" kindref="member">SephoneSubscribePolicy</ref></type>
        <definition>SephoneSubscribePolicy __policy_str_to_enum</definition>
        <argsstring>(const char *pol)</argsstring>
        <name>__policy_str_to_enum</name>
        <param>
          <type>const char *</type>
          <declname>pol</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" line="576" column="1" bodyfile="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" bodystart="576" bodyend="588"/>
      </memberdef>
      <memberdef kind="function" id="friend_8c_1aa55fa205889c5185a31774e23d7deafa" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="group__proxies_1ga6de67319de408cf5e0994375df31f431" kindref="member">SephoneProxyConfig</ref> *</type>
        <definition>SephoneProxyConfig* __index_to_proxy</definition>
        <argsstring>(SephoneCore *lc, int index)</argsstring>
        <name>__index_to_proxy</name>
        <param>
          <type><ref refid="group__initializing_1ga1c39f5ce369d188892c11e63b93d66ca" kindref="member">SephoneCore</ref> *</type>
          <declname>lc</declname>
        </param>
        <param>
          <type>int</type>
          <declname>index</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" line="590" column="1" bodyfile="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" bodystart="590" bodyend="593"/>
      </memberdef>
      <memberdef kind="function" id="friend_8c_1a8042aac6fbfd08a0909123ed3d93b2e9" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> *</type>
        <definition>SephoneFriend* sephone_friend_new_from_config_file</definition>
        <argsstring>(SephoneCore *lc, int index)</argsstring>
        <name>sephone_friend_new_from_config_file</name>
        <param>
          <type><ref refid="group__initializing_1ga1c39f5ce369d188892c11e63b93d66ca" kindref="member">SephoneCore</ref> *</type>
          <declname>lc</declname>
        </param>
        <param>
          <type>int</type>
          <declname>index</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" line="595" column="1" bodyfile="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" bodystart="595" bodyend="626"/>
      </memberdef>
      <memberdef kind="function" id="friend_8c_1a3fb7899a6fe3aed9485069e0b914a795" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>const char *</type>
        <definition>const char* __policy_enum_to_str</definition>
        <argsstring>(SephoneSubscribePolicy pol)</argsstring>
        <name>__policy_enum_to_str</name>
        <param>
          <type><ref refid="group__buddy__list_1ga913a5506d8bd5d530d8a5ad92d5fd75c" kindref="member">SephoneSubscribePolicy</ref></type>
          <declname>pol</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" line="628" column="1" bodyfile="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" bodystart="628" bodyend="642"/>
      </memberdef>
      <memberdef kind="function" id="friend_8c_1ace9c9210424649bf25a21473cba86c89" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void sephone_friend_write_to_config_file</definition>
        <argsstring>(SpConfig *config, SephoneFriend *lf, int index)</argsstring>
        <name>sephone_friend_write_to_config_file</name>
        <param>
          <type><ref refid="group__misc_1ga224933b87fd3d0bbcb9b61850ddfa3fb" kindref="member">SpConfig</ref> *</type>
          <declname>config</declname>
        </param>
        <param>
          <type><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> *</type>
          <declname>lf</declname>
        </param>
        <param>
          <type>int</type>
          <declname>index</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" line="644" column="1" bodyfile="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" bodystart="644" bodyend="670"/>
      </memberdef>
      <memberdef kind="function" id="friend_8c_1a95e518301124878a5f319c4a2dfd58d1" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void sephone_core_write_friends_config</definition>
        <argsstring>(SephoneCore *lc)</argsstring>
        <name>sephone_core_write_friends_config</name>
        <param>
          <type><ref refid="group__initializing_1ga1c39f5ce369d188892c11e63b93d66ca" kindref="member">SephoneCore</ref> *</type>
          <declname>lc</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" line="672" column="1" bodyfile="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" bodystart="672" bodyend="681"/>
      </memberdef>
      <memberdef kind="function" id="group__buddy__list_1gaf5d3d64ed3a9d203b6dd7e665d539eca" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="group__initializing_1ga1c39f5ce369d188892c11e63b93d66ca" kindref="member">SephoneCore</ref> *</type>
        <definition>SephoneCore* sephone_friend_get_core</definition>
        <argsstring>(const SephoneFriend *fr)</argsstring>
        <name>sephone_friend_get_core</name>
        <param>
          <type>const <ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> *</type>
          <declname>fr</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Returns the SephoneCore object managing this friend, if any. </para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" line="683" column="1" bodyfile="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" bodystart="683" bodyend="685"/>
      </memberdef>
      <memberdef kind="function" id="group__buddy__list_1ga20ae101ca5f5bd64b8e9f12860a2521e" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> *</type>
        <definition>SephoneFriend* sephone_friend_ref</definition>
        <argsstring>(SephoneFriend *lf)</argsstring>
        <name>sephone_friend_ref</name>
        <param>
          <type><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> *</type>
          <declname>lf</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Acquire a reference to the sephone friend. <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">lf</parametername>
</parameternamelist>
<parameterdescription>
<para>SephoneFriend object </para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>The same SephoneFriend object </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" line="687" column="1" bodyfile="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" bodystart="687" bodyend="690"/>
      </memberdef>
      <memberdef kind="function" id="group__buddy__list_1gad938f868371c2c5bafdadf9165342039" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void sephone_friend_unref</definition>
        <argsstring>(SephoneFriend *lf)</argsstring>
        <name>sephone_friend_unref</name>
        <param>
          <type><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> *</type>
          <declname>lf</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Release a reference to the sephone friend. <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername direction="in">lf</parametername>
</parameternamelist>
<parameterdescription>
<para>LinohoneFriend object </para></parameterdescription>
</parameteritem>
</parameterlist>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" line="692" column="1" bodyfile="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" bodystart="692" bodyend="694"/>
      </memberdef>
      <memberdef kind="function" id="group__buddy__list_1ga6d35c0b7b22234d84cd22594ecd6e6a1" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void sephone_friend_destroy</definition>
        <argsstring>(SephoneFriend *lf)</argsstring>
        <name>sephone_friend_destroy</name>
        <param>
          <type><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref> *</type>
          <declname>lf</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Destroy a SephoneFriend. <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>lf</parametername>
</parameternamelist>
<parameterdescription>
<para>SephoneFriend object </para></parameterdescription>
</parameteritem>
</parameterlist>
<xrefsect id="deprecated_1_deprecated000073"><xreftitle>Deprecated</xreftitle><xrefdescription><para>Use <ref refid="group__buddy__list_1gad938f868371c2c5bafdadf9165342039" kindref="member">sephone_friend_unref()</ref> instead. </para></xrefdescription></xrefsect></para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" line="697" column="1" bodyfile="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" bodystart="697" bodyend="699"/>
      </memberdef>
      <memberdef kind="function" id="friend_8c_1aada426bf700fbbc9d2efa307220a6439" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>BELLE_SIP_DECLARE_NO_IMPLEMENTED_INTERFACES</definition>
        <argsstring>(SephoneFriend)</argsstring>
        <name>BELLE_SIP_DECLARE_NO_IMPLEMENTED_INTERFACES</name>
        <param>
          <type><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref></type>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" line="701" column="1"/>
      </memberdef>
      <memberdef kind="function" id="friend_8c_1a43fe16d66e212b283a8d51e3b43f9af3" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type></type>
        <definition>BELLE_SIP_INSTANCIATE_VPTR</definition>
        <argsstring>(SephoneFriend, belle_sip_object_t,(belle_sip_object_destroy_t) _sephone_friend_destroy, NULL, NULL, FALSE)</argsstring>
        <name>BELLE_SIP_INSTANCIATE_VPTR</name>
        <param>
          <type><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref></type>
        </param>
        <param>
          <type>belle_sip_object_t</type>
        </param>
        <param>
          <type>(belle_sip_object_destroy_t)</type>
          <declname>_sephone_friend_destroy</declname>
        </param>
        <param>
          <type>NULL</type>
        </param>
        <param>
          <type>NULL</type>
        </param>
        <param>
          <type>FALSE</type>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c" line="703" column="1"/>
      </memberdef>
      </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="comment">/***************************************************************************</highlight></codeline>
<codeline lineno="2"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>friend.c</highlight></codeline>
<codeline lineno="3"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="4"><highlight class="comment"><sp/>*<sp/><sp/>Sat<sp/>May<sp/>15<sp/>15:25:16<sp/>2004</highlight></codeline>
<codeline lineno="5"><highlight class="comment"><sp/>*<sp/><sp/>Copyright<sp/><sp/>2004-2009<sp/><sp/>Simon<sp/>Morlat</highlight></codeline>
<codeline lineno="6"><highlight class="comment"><sp/>*<sp/><sp/>Email</highlight></codeline>
<codeline lineno="7"><highlight class="comment"><sp/>****************************************************************************/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8"><highlight class="normal"></highlight></codeline>
<codeline lineno="9"><highlight class="normal"></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="10"><highlight class="comment"><sp/>*<sp/><sp/>This<sp/>program<sp/>is<sp/>free<sp/>software;<sp/>you<sp/>can<sp/>redistribute<sp/>it<sp/>and/or<sp/>modify</highlight></codeline>
<codeline lineno="11"><highlight class="comment"><sp/>*<sp/><sp/>it<sp/>under<sp/>the<sp/>terms<sp/>of<sp/>the<sp/>GNU<sp/>General<sp/>Public<sp/>License<sp/>as<sp/>published<sp/>by</highlight></codeline>
<codeline lineno="12"><highlight class="comment"><sp/>*<sp/><sp/>the<sp/>Free<sp/>Software<sp/>Foundation;<sp/>either<sp/>version<sp/>2<sp/>of<sp/>the<sp/>License,<sp/>or</highlight></codeline>
<codeline lineno="13"><highlight class="comment"><sp/>*<sp/><sp/>(at<sp/>your<sp/>option)<sp/>any<sp/>later<sp/>version.</highlight></codeline>
<codeline lineno="14"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="15"><highlight class="comment"><sp/>*<sp/><sp/>This<sp/>program<sp/>is<sp/>distributed<sp/>in<sp/>the<sp/>hope<sp/>that<sp/>it<sp/>will<sp/>be<sp/>useful,</highlight></codeline>
<codeline lineno="16"><highlight class="comment"><sp/>*<sp/><sp/>but<sp/>WITHOUT<sp/>ANY<sp/>WARRANTY;<sp/>without<sp/>even<sp/>the<sp/>implied<sp/>warranty<sp/>of</highlight></codeline>
<codeline lineno="17"><highlight class="comment"><sp/>*<sp/><sp/>MERCHANTABILITY<sp/>or<sp/>FITNESS<sp/>FOR<sp/>A<sp/>PARTICULAR<sp/>PURPOSE.<sp/><sp/>See<sp/>the</highlight></codeline>
<codeline lineno="18"><highlight class="comment"><sp/>*<sp/><sp/>GNU<sp/>Library<sp/>General<sp/>Public<sp/>License<sp/>for<sp/>more<sp/>details.</highlight></codeline>
<codeline lineno="19"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="20"><highlight class="comment"><sp/>*<sp/><sp/>You<sp/>should<sp/>have<sp/>received<sp/>a<sp/>copy<sp/>of<sp/>the<sp/>GNU<sp/>General<sp/>Public<sp/>License</highlight></codeline>
<codeline lineno="21"><highlight class="comment"><sp/>*<sp/><sp/>along<sp/>with<sp/>this<sp/>program;<sp/>if<sp/>not,<sp/>write<sp/>to<sp/>the<sp/>Free<sp/>Software</highlight></codeline>
<codeline lineno="22"><highlight class="comment"><sp/>*<sp/><sp/>Foundation,<sp/>Inc.,<sp/>59<sp/>Temple<sp/>Place<sp/>-<sp/>Suite<sp/>330,<sp/>Boston,<sp/>MA<sp/>02111-1307,<sp/>USA.</highlight></codeline>
<codeline lineno="23"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="24"><highlight class="normal"></highlight></codeline>
<codeline lineno="25"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;sephonecore.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="26"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;private.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="27"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;spconfig.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="28"><highlight class="normal"></highlight></codeline>
<codeline lineno="29"><highlight class="normal"></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*<ref refid="group__buddy__list_1ga0dda27574e0a28535203c79c73209060" kindref="member">sephone_online_status_to_string</ref>(<ref refid="group__buddy__list_1ga751cee710246d233b3a4e0ebd2840298" kindref="member">SephoneOnlineStatus</ref><sp/>ss){</highlight></codeline>
<codeline lineno="30"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*str=NULL;</highlight></codeline>
<codeline lineno="31"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal">(ss){</highlight></codeline>
<codeline lineno="32"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1gga7d8d36be33ebac1ef82e55a06d6f0bf5aa3f34eb8311e2c07d774b4211e27a640" kindref="member">SephoneStatusOnline</ref>:</highlight></codeline>
<codeline lineno="33"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>str=_(</highlight><highlight class="stringliteral">&quot;Online&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="34"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="35"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1gga7d8d36be33ebac1ef82e55a06d6f0bf5af727dbd3079926a115b70fca7bcc8bef" kindref="member">SephoneStatusBusy</ref>:</highlight></codeline>
<codeline lineno="36"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>str=_(</highlight><highlight class="stringliteral">&quot;Busy&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="37"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="38"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1gga7d8d36be33ebac1ef82e55a06d6f0bf5a82f11dc225e1eee499c9a9db33da26eb" kindref="member">SephoneStatusBeRightBack</ref>:</highlight></codeline>
<codeline lineno="39"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>str=_(</highlight><highlight class="stringliteral">&quot;Be<sp/>right<sp/>back&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="40"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="41"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1gga7d8d36be33ebac1ef82e55a06d6f0bf5ac453ea75e9922af1054e31bbdb14261a" kindref="member">SephoneStatusAway</ref>:</highlight></codeline>
<codeline lineno="42"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>str=_(</highlight><highlight class="stringliteral">&quot;Away&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="43"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="44"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1gga7d8d36be33ebac1ef82e55a06d6f0bf5abcea37fc14d890ed7ce2d82c59dc5c45" kindref="member">SephoneStatusOnThePhone</ref>:</highlight></codeline>
<codeline lineno="45"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>str=_(</highlight><highlight class="stringliteral">&quot;On<sp/>the<sp/>phone&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="46"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="47"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1gga7d8d36be33ebac1ef82e55a06d6f0bf5a4bfb5eed599144e6a1c521db5bd5b56c" kindref="member">SephoneStatusOutToLunch</ref>:</highlight></codeline>
<codeline lineno="48"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>str=_(</highlight><highlight class="stringliteral">&quot;Out<sp/>to<sp/>lunch&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="49"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="50"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1gga7d8d36be33ebac1ef82e55a06d6f0bf5ab5c684ac2645d7a6c05be24ca0d87a47" kindref="member">SephoneStatusDoNotDisturb</ref>:</highlight></codeline>
<codeline lineno="51"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>str=_(</highlight><highlight class="stringliteral">&quot;Do<sp/>not<sp/>disturb&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="52"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="53"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1gga7d8d36be33ebac1ef82e55a06d6f0bf5a8d19e63aaeb4f15e7b12ca587bffefd5" kindref="member">SephoneStatusMoved</ref>:</highlight></codeline>
<codeline lineno="54"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>str=_(</highlight><highlight class="stringliteral">&quot;Moved&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="56"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1gga7d8d36be33ebac1ef82e55a06d6f0bf5a2d186d3744fe8b8efd9f7b378c97dca1" kindref="member">SephoneStatusAltService</ref>:</highlight></codeline>
<codeline lineno="57"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>str=_(</highlight><highlight class="stringliteral">&quot;Using<sp/>another<sp/>messaging<sp/>service&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="58"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="59"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1gga7d8d36be33ebac1ef82e55a06d6f0bf5ae218d739af22565632105aa805f2f0f5" kindref="member">SephoneStatusOffline</ref>:</highlight></codeline>
<codeline lineno="60"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>str=_(</highlight><highlight class="stringliteral">&quot;Offline&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="61"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="62"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1gga7d8d36be33ebac1ef82e55a06d6f0bf5ae60011a12dda1e73aab5481115b9b09c" kindref="member">SephoneStatusPending</ref>:</highlight></codeline>
<codeline lineno="63"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>str=_(</highlight><highlight class="stringliteral">&quot;Pending&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="64"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="65"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1gga7d8d36be33ebac1ef82e55a06d6f0bf5a165a53c795910a788a3aa0efc6f28275" kindref="member">SephoneStatusVacation</ref>:</highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>str=_(</highlight><highlight class="stringliteral">&quot;Vacation&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="67"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">default</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="68"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>str=_(</highlight><highlight class="stringliteral">&quot;Unknown<sp/>status&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>str;</highlight></codeline>
<codeline lineno="71"><highlight class="normal">}</highlight></codeline>
<codeline lineno="72"><highlight class="normal"></highlight></codeline>
<codeline lineno="73"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>friend_compare(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*<sp/>a,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*<sp/>b){</highlight></codeline>
<codeline lineno="74"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__sephone__address_1ga55f07568eee2ed418e36ed9781cf2e23" kindref="member">SephoneAddress</ref><sp/>*fa=((<ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref>*)a)-&gt;uri;</highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__sephone__address_1ga55f07568eee2ed418e36ed9781cf2e23" kindref="member">SephoneAddress</ref><sp/>*fb=((<ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref>*)b)-&gt;uri;</highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="group__sephone__address_1gaf14ef4e6e3e317348563039112232768" kindref="member">sephone_address_weak_equal</ref>(fa,fb))<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>1;</highlight></codeline>
<codeline lineno="78"><highlight class="normal">}</highlight></codeline>
<codeline lineno="79"><highlight class="normal"></highlight></codeline>
<codeline lineno="80"><highlight class="normal"></highlight></codeline>
<codeline lineno="81"><highlight class="normal">MSList<sp/>*sephone_find_friend_by_address(MSList<sp/>*fl,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="group__sephone__address_1ga55f07568eee2ed418e36ed9781cf2e23" kindref="member">SephoneAddress</ref><sp/>*addr,<sp/><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref><sp/>**lf){</highlight></codeline>
<codeline lineno="82"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>MSList<sp/>*res=NULL;</highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref><sp/>dummy;</highlight></codeline>
<codeline lineno="84"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(lf!=NULL)<sp/>*lf=NULL;</highlight></codeline>
<codeline lineno="85"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dummy.uri=(<ref refid="group__sephone__address_1ga55f07568eee2ed418e36ed9781cf2e23" kindref="member">SephoneAddress</ref>*)addr;</highlight></codeline>
<codeline lineno="86"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>res=ms_list_find_custom(fl,friend_compare,&amp;dummy);</highlight></codeline>
<codeline lineno="87"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(lf!=NULL<sp/>&amp;&amp;<sp/>res!=NULL)<sp/>*lf=(<ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref>*)res-&gt;data;</highlight></codeline>
<codeline lineno="88"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>res;</highlight></codeline>
<codeline lineno="89"><highlight class="normal">}</highlight></codeline>
<codeline lineno="90"><highlight class="normal"></highlight></codeline>
<codeline lineno="91"><highlight class="normal"><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref><sp/>*sephone_find_friend_by_inc_subscribe(MSList<sp/>*l,<sp/>SalOp<sp/>*op){</highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>MSList<sp/>*elem;</highlight></codeline>
<codeline lineno="93"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(elem=l;elem!=NULL;elem=elem-&gt;next){</highlight></codeline>
<codeline lineno="94"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref><sp/>*lf=(<ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref>*)elem-&gt;data;</highlight></codeline>
<codeline lineno="95"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>if<sp/>(lf-&gt;insub==op)<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>lf;</highlight></codeline>
<codeline lineno="96"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="97"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>NULL;</highlight></codeline>
<codeline lineno="98"><highlight class="normal">}</highlight></codeline>
<codeline lineno="99"><highlight class="normal"></highlight></codeline>
<codeline lineno="100"><highlight class="normal"><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref><sp/>*sephone_find_friend_by_out_subscribe(MSList<sp/>*l,<sp/>SalOp<sp/>*op){</highlight></codeline>
<codeline lineno="101"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>MSList<sp/>*elem;</highlight></codeline>
<codeline lineno="102"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref><sp/>*lf;</highlight></codeline>
<codeline lineno="103"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(elem=l;elem!=NULL;elem=elem-&gt;next){</highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lf=(<ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref>*)elem-&gt;data;</highlight></codeline>
<codeline lineno="105"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>if<sp/>(lf-&gt;outsub==op)<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>lf;</highlight></codeline>
<codeline lineno="106"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>NULL;</highlight></codeline>
<codeline lineno="108"><highlight class="normal">}</highlight></codeline>
<codeline lineno="109"><highlight class="normal"></highlight></codeline>
<codeline lineno="110"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>__sephone_friend_do_subscribe(<ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref><sp/>*fr){</highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__initializing_1ga1c39f5ce369d188892c11e63b93d66ca" kindref="member">SephoneCore</ref><sp/>*lc=fr-&gt;lc;</highlight></codeline>
<codeline lineno="112"><highlight class="normal"></highlight></codeline>
<codeline lineno="113"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(fr-&gt;outsub==NULL){</highlight></codeline>
<codeline lineno="114"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>people<sp/>for<sp/>which<sp/>we<sp/>don&apos;t<sp/>have<sp/>yet<sp/>an<sp/>answer<sp/>should<sp/>appear<sp/>as<sp/>offline<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="115"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fr-&gt;presence=NULL;</highlight></codeline>
<codeline lineno="116"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="117"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>if<sp/>(fr-&gt;lc-&gt;vtable.notify_recv)</highlight></codeline>
<codeline lineno="118"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fr-&gt;lc-&gt;vtable.notify_recv(fr-&gt;lc,(SephoneFriend*)fr);</highlight></codeline>
<codeline lineno="119"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="121"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sal_op_release(fr-&gt;outsub);</highlight></codeline>
<codeline lineno="122"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fr-&gt;outsub=NULL;</highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fr-&gt;outsub=sal_op_new(lc-&gt;sal);</highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sephone_configure_op(lc,fr-&gt;outsub,fr-&gt;uri,NULL,TRUE);</highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sal_subscribe_presence(fr-&gt;outsub,NULL,NULL,<ref refid="group__misc_1ga3d31ae0b188509173833ba6216499759" kindref="member">sp_config_get_int</ref>(lc-&gt;config,</highlight><highlight class="stringliteral">&quot;sip&quot;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&quot;subscribe_expires&quot;</highlight><highlight class="normal">,600));</highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fr-&gt;subscribe_active=TRUE;</highlight></codeline>
<codeline lineno="128"><highlight class="normal">}</highlight></codeline>
<codeline lineno="129"><highlight class="normal"></highlight></codeline>
<codeline lineno="130"><highlight class="normal"><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref><sp/>*<sp/><ref refid="group__buddy__list_1ga55657aa5ea2ecfb3b387061869028e89" kindref="member">sephone_friend_new</ref>(){</highlight></codeline>
<codeline lineno="131"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref><sp/>*obj=belle_sip_object_new(<ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref>);</highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>obj-&gt;pol=<ref refid="group__buddy__list_1gga2839a15fda61daa92ba614e68bd0662aa2199de9d8d5138e2ad5537068d94838a" kindref="member">SephoneSPAccept</ref>;</highlight></codeline>
<codeline lineno="133"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>obj-&gt;presence=NULL;</highlight></codeline>
<codeline lineno="134"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>obj-&gt;subscribe=TRUE;</highlight></codeline>
<codeline lineno="135"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>obj;</highlight></codeline>
<codeline lineno="136"><highlight class="normal">}</highlight></codeline>
<codeline lineno="137"><highlight class="normal"></highlight></codeline>
<codeline lineno="138"><highlight class="normal"><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref><sp/>*<ref refid="group__buddy__list_1gac799b73ca9a88fcf685fad8c5d7af1a2" kindref="member">sephone_friend_new_with_address</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*addr){</highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__sephone__address_1ga55f07568eee2ed418e36ed9781cf2e23" kindref="member">SephoneAddress</ref>*<sp/>sephone_address<sp/>=<sp/><ref refid="group__sephone__address_1ga96400e0c163c83900928f01aa13df7a6" kindref="member">sephone_address_new</ref>(addr);</highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref><sp/>*fr;</highlight></codeline>
<codeline lineno="141"><highlight class="normal"></highlight></codeline>
<codeline lineno="142"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(sephone_address<sp/>==<sp/>NULL)<sp/>{</highlight></codeline>
<codeline lineno="143"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ms_error(</highlight><highlight class="stringliteral">&quot;Cannot<sp/>create<sp/>friend<sp/>for<sp/>address<sp/>[%s]&quot;</highlight><highlight class="normal">,addr?addr:</highlight><highlight class="stringliteral">&quot;null&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="144"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>NULL;</highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="146"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fr=<ref refid="group__buddy__list_1ga55657aa5ea2ecfb3b387061869028e89" kindref="member">sephone_friend_new</ref>();</highlight></codeline>
<codeline lineno="147"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__buddy__list_1ga8e27f1bdf5b188381e923ef5a264ffcb" kindref="member">sephone_friend_set_address</ref>(fr,sephone_address);</highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__sephone__address_1ga3fe5d8eb9c373045efe9ae9e15458459" kindref="member">sephone_address_destroy</ref>(sephone_address);</highlight></codeline>
<codeline lineno="149"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>fr;</highlight></codeline>
<codeline lineno="150"><highlight class="normal">}</highlight></codeline>
<codeline lineno="151"><highlight class="normal"></highlight></codeline>
<codeline lineno="152"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1gafc7b6450bec5d85668363db0bb0f6560" kindref="member">sephone_friend_set_user_data</ref>(<ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref><sp/>*lf,<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*data){</highlight></codeline>
<codeline lineno="153"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lf-&gt;user_data=data;</highlight></codeline>
<codeline lineno="154"><highlight class="normal">}</highlight></codeline>
<codeline lineno="155"><highlight class="normal"></highlight></codeline>
<codeline lineno="156"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal">*<sp/><ref refid="group__buddy__list_1gaac5cbbcd154c06ae0dfb2242c36c37b9" kindref="member">sephone_friend_get_user_data</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref><sp/>*lf){</highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>lf-&gt;user_data;</highlight></codeline>
<codeline lineno="158"><highlight class="normal">}</highlight></codeline>
<codeline lineno="159"><highlight class="normal"></highlight></codeline>
<codeline lineno="160"><highlight class="normal">bool_t<sp/><ref refid="group__buddy__list_1gadf95ab03a87a9df7719f0d742b5e9d33" kindref="member">sephone_friend_in_list</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref><sp/>*lf){</highlight></codeline>
<codeline lineno="161"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>lf-&gt;lc!=NULL;</highlight></codeline>
<codeline lineno="162"><highlight class="normal">}</highlight></codeline>
<codeline lineno="163"><highlight class="normal"></highlight></codeline>
<codeline lineno="164"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1ga5780c6f6dda94c3962f2a5344d90447e" kindref="member">sephone_core_interpret_friend_uri</ref>(<ref refid="group__initializing_1ga1c39f5ce369d188892c11e63b93d66ca" kindref="member">SephoneCore</ref><sp/>*lc,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*uri,<sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>**result){</highlight></codeline>
<codeline lineno="165"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__sephone__address_1ga55f07568eee2ed418e36ed9781cf2e23" kindref="member">SephoneAddress</ref><sp/>*fr=NULL;</highlight></codeline>
<codeline lineno="166"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*result=NULL;</highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fr=<ref refid="group__sephone__address_1ga96400e0c163c83900928f01aa13df7a6" kindref="member">sephone_address_new</ref>(uri);</highlight></codeline>
<codeline lineno="168"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(fr==NULL){</highlight></codeline>
<codeline lineno="169"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*tmp=NULL;</highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(strchr(uri,</highlight><highlight class="charliteral">&apos;@&apos;</highlight><highlight class="normal">)!=NULL){</highlight></codeline>
<codeline lineno="171"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__sephone__address_1ga55f07568eee2ed418e36ed9781cf2e23" kindref="member">SephoneAddress</ref><sp/>*u;</highlight></codeline>
<codeline lineno="172"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*try<sp/>adding<sp/>sip:*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="173"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tmp=ms_strdup_printf(</highlight><highlight class="stringliteral">&quot;sip:%s&quot;</highlight><highlight class="normal">,uri);</highlight></codeline>
<codeline lineno="174"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>u=<ref refid="group__sephone__address_1ga96400e0c163c83900928f01aa13df7a6" kindref="member">sephone_address_new</ref>(tmp);</highlight></codeline>
<codeline lineno="175"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(u!=NULL){</highlight></codeline>
<codeline lineno="176"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*result=tmp;</highlight></codeline>
<codeline lineno="177"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="178"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(lc-&gt;default_proxy!=NULL){</highlight></codeline>
<codeline lineno="179"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*try<sp/>adding<sp/>domain<sp/>part<sp/>from<sp/>default<sp/>current<sp/>proxy*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="180"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__sephone__address_1ga55f07568eee2ed418e36ed9781cf2e23" kindref="member">SephoneAddress</ref><sp/>*<sp/></highlight><highlight class="keywordtype">id</highlight><highlight class="normal">=<ref refid="group__sephone__address_1ga96400e0c163c83900928f01aa13df7a6" kindref="member">sephone_address_new</ref>(<ref refid="group__proxies_1ga7e085ebc050004f40c6ced0b81f2038c" kindref="member">sephone_core_get_identity</ref>(lc));</highlight></codeline>
<codeline lineno="181"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((</highlight><highlight class="keywordtype">id</highlight><highlight class="normal">!=NULL)<sp/>&amp;&amp;<sp/>(uri[0]<sp/>!=<sp/></highlight><highlight class="charliteral">&apos;\0&apos;</highlight><highlight class="normal">)){</highlight></codeline>
<codeline lineno="182"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__sephone__address_1ga2b25fba2a97ad7a05eecf52907acc7a1" kindref="member">sephone_address_set_display_name</ref>(</highlight><highlight class="keywordtype">id</highlight><highlight class="normal">,NULL);</highlight></codeline>
<codeline lineno="183"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__sephone__address_1ga2d1f0b9b5253b5f0c7a61c7bdb72e0be" kindref="member">sephone_address_set_username</ref>(</highlight><highlight class="keywordtype">id</highlight><highlight class="normal">,uri);</highlight></codeline>
<codeline lineno="184"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*result=<ref refid="group__sephone__address_1gaaaff8fab60951d670b48afe2ea015e5f" kindref="member">sephone_address_as_string</ref>(</highlight><highlight class="keywordtype">id</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="185"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__sephone__address_1ga3fe5d8eb9c373045efe9ae9e15458459" kindref="member">sephone_address_destroy</ref>(</highlight><highlight class="keywordtype">id</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="186"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="187"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="188"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(*result){</highlight></codeline>
<codeline lineno="189"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*looks<sp/>good<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="190"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ms_message(</highlight><highlight class="stringliteral">&quot;%s<sp/>interpreted<sp/>as<sp/>%s&quot;</highlight><highlight class="normal">,uri,*result);</highlight></codeline>
<codeline lineno="191"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="192"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ms_warning(</highlight><highlight class="stringliteral">&quot;Fail<sp/>to<sp/>interpret<sp/>friend<sp/>uri<sp/>%s&quot;</highlight><highlight class="normal">,uri);</highlight></codeline>
<codeline lineno="193"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="194"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="195"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*result=<ref refid="group__sephone__address_1gaaaff8fab60951d670b48afe2ea015e5f" kindref="member">sephone_address_as_string</ref>(fr);</highlight></codeline>
<codeline lineno="196"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__sephone__address_1ga3fe5d8eb9c373045efe9ae9e15458459" kindref="member">sephone_address_destroy</ref>(fr);</highlight></codeline>
<codeline lineno="197"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="198"><highlight class="normal">}</highlight></codeline>
<codeline lineno="199"><highlight class="normal"></highlight></codeline>
<codeline lineno="200"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1ga8e27f1bdf5b188381e923ef5a264ffcb" kindref="member">sephone_friend_set_address</ref>(<ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref><sp/>*lf,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="group__sephone__address_1ga55f07568eee2ed418e36ed9781cf2e23" kindref="member">SephoneAddress</ref><sp/>*addr){</highlight></codeline>
<codeline lineno="201"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__sephone__address_1ga55f07568eee2ed418e36ed9781cf2e23" kindref="member">SephoneAddress</ref><sp/>*fr=<ref refid="group__sephone__address_1gafce3008c5d8a2ee529a5e69b1ae28723" kindref="member">sephone_address_clone</ref>(addr);</highlight></codeline>
<codeline lineno="202"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__sephone__address_1ga02500100d80fe80561d87367c445e599" kindref="member">sephone_address_clean</ref>(fr);</highlight></codeline>
<codeline lineno="203"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(lf-&gt;uri!=NULL)<sp/><ref refid="group__sephone__address_1ga3fe5d8eb9c373045efe9ae9e15458459" kindref="member">sephone_address_destroy</ref>(lf-&gt;uri);</highlight></codeline>
<codeline lineno="204"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lf-&gt;uri=fr;</highlight></codeline>
<codeline lineno="205"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="206"><highlight class="normal">}</highlight></codeline>
<codeline lineno="207"><highlight class="normal"></highlight></codeline>
<codeline lineno="208"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1ga68cbe064b48316810a5fb251d45cd5f8" kindref="member">sephone_friend_set_name</ref>(<ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref><sp/>*lf,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*name){</highlight></codeline>
<codeline lineno="209"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__sephone__address_1ga55f07568eee2ed418e36ed9781cf2e23" kindref="member">SephoneAddress</ref><sp/>*fr=lf-&gt;uri;</highlight></codeline>
<codeline lineno="210"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(fr==NULL){</highlight></codeline>
<codeline lineno="211"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ms_error(</highlight><highlight class="stringliteral">&quot;sephone_friend_set_sip_addr()<sp/>must<sp/>be<sp/>called<sp/>before<sp/>sephone_friend_set_name().&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="212"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="213"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="214"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__sephone__address_1ga2b25fba2a97ad7a05eecf52907acc7a1" kindref="member">sephone_address_set_display_name</ref>(fr,name);</highlight></codeline>
<codeline lineno="215"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="216"><highlight class="normal">}</highlight></codeline>
<codeline lineno="217"><highlight class="normal"></highlight></codeline>
<codeline lineno="218"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1ga3155f520c95b024ddb6f2918c0763857" kindref="member">sephone_friend_enable_subscribes</ref>(<ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref><sp/>*fr,<sp/>bool_t<sp/>val){</highlight></codeline>
<codeline lineno="219"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fr-&gt;subscribe=val;</highlight></codeline>
<codeline lineno="220"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="221"><highlight class="normal">}</highlight></codeline>
<codeline lineno="222"><highlight class="normal"></highlight></codeline>
<codeline lineno="223"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1ga2a06db1ee3bb318d911f3b7c8fa9c5d4" kindref="member">sephone_friend_set_inc_subscribe_policy</ref>(<ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref><sp/>*fr,<sp/><ref refid="group__buddy__list_1ga913a5506d8bd5d530d8a5ad92d5fd75c" kindref="member">SephoneSubscribePolicy</ref><sp/>pol)</highlight></codeline>
<codeline lineno="224"><highlight class="normal">{</highlight></codeline>
<codeline lineno="225"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fr-&gt;pol=pol;</highlight></codeline>
<codeline lineno="226"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="227"><highlight class="normal">}</highlight></codeline>
<codeline lineno="228"><highlight class="normal"></highlight></codeline>
<codeline lineno="229"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>sephone_friend_notify(<ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref><sp/>*lf,<sp/><ref refid="struct__SephonePresenceModel" kindref="compound">SephonePresenceModel</ref><sp/>*presence){</highlight></codeline>
<codeline lineno="230"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*addr=<ref refid="group__sephone__address_1gaaaff8fab60951d670b48afe2ea015e5f" kindref="member">sephone_address_as_string</ref>(<ref refid="group__buddy__list_1ga6e40fe5bfee602b8cedb37a62f3052cb" kindref="member">sephone_friend_get_address</ref>(lf));</highlight></codeline>
<codeline lineno="231"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ms_message(</highlight><highlight class="stringliteral">&quot;Want<sp/>to<sp/>notify<sp/>%s,<sp/>insub=%p&quot;</highlight><highlight class="normal">,addr,lf-&gt;insub);</highlight></codeline>
<codeline lineno="232"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ms_free(addr);</highlight></codeline>
<codeline lineno="233"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(lf-&gt;insub!=NULL){</highlight></codeline>
<codeline lineno="234"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sal_notify_presence(lf-&gt;insub,(SalPresenceModel<sp/>*)presence);</highlight></codeline>
<codeline lineno="235"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="236"><highlight class="normal">}</highlight></codeline>
<codeline lineno="237"><highlight class="normal"></highlight></codeline>
<codeline lineno="238"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>sephone_friend_unsubscribe(<ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref><sp/>*lf){</highlight></codeline>
<codeline lineno="239"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(lf-&gt;outsub!=NULL)<sp/>{</highlight></codeline>
<codeline lineno="240"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sal_unsubscribe(lf-&gt;outsub);</highlight></codeline>
<codeline lineno="241"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lf-&gt;subscribe_active=FALSE;</highlight></codeline>
<codeline lineno="242"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="243"><highlight class="normal">}</highlight></codeline>
<codeline lineno="244"><highlight class="normal"></highlight></codeline>
<codeline lineno="245"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>sephone_friend_invalidate_subscription(<ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref><sp/>*lf){</highlight></codeline>
<codeline lineno="246"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(lf-&gt;outsub!=NULL)<sp/>{</highlight></codeline>
<codeline lineno="247"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__initializing_1ga1c39f5ce369d188892c11e63b93d66ca" kindref="member">SephoneCore</ref><sp/>*lc=lf-&gt;lc;</highlight></codeline>
<codeline lineno="248"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sal_op_release(lf-&gt;outsub);</highlight></codeline>
<codeline lineno="249"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lf-&gt;outsub=NULL;</highlight></codeline>
<codeline lineno="250"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lf-&gt;subscribe_active=FALSE;</highlight></codeline>
<codeline lineno="251"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*notify<sp/>application<sp/>that<sp/>we<sp/>no<sp/>longer<sp/>know<sp/>the<sp/>presence<sp/>activity<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="252"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(lf-&gt;presence<sp/>!=<sp/>NULL)<sp/>{</highlight></codeline>
<codeline lineno="253"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__buddy__list_1ga3cc09d589693edc3e6f677c4e6e78776" kindref="member">sephone_presence_model_unref</ref>(lf-&gt;presence);</highlight></codeline>
<codeline lineno="254"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="255"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lf-&gt;presence<sp/>=<sp/><ref refid="group__buddy__list_1gaa4e2480945361e52ea662bcc0ea019fc" kindref="member">sephone_presence_model_new_with_activity</ref>(<ref refid="group__buddy__list_1gga926b4918657c790b1db2de10a6fd9726a48278908a7598d2ef537c4bf7b3e29a0" kindref="member">SephonePresenceActivityOffline</ref>,</highlight><highlight class="stringliteral">&quot;unknown<sp/>activity&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="256"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sephone_core_notify_notify_presence_received(lc,lf);</highlight></codeline>
<codeline lineno="257"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="258"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lf-&gt;initial_subscribes_sent=FALSE;</highlight></codeline>
<codeline lineno="259"><highlight class="normal">}</highlight></codeline>
<codeline lineno="260"><highlight class="normal"></highlight></codeline>
<codeline lineno="261"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>sephone_friend_close_subscriptions(<ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref><sp/>*lf){</highlight></codeline>
<codeline lineno="262"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sephone_friend_unsubscribe(lf);</highlight></codeline>
<codeline lineno="263"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(lf-&gt;insub){</highlight></codeline>
<codeline lineno="264"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sal_notify_presence_close(lf-&gt;insub);</highlight></codeline>
<codeline lineno="265"><highlight class="normal"></highlight></codeline>
<codeline lineno="266"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="267"><highlight class="normal">}</highlight></codeline>
<codeline lineno="268"><highlight class="normal"></highlight></codeline>
<codeline lineno="269"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>_sephone_friend_destroy(<ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref><sp/>*lf){</highlight></codeline>
<codeline lineno="270"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(lf-&gt;insub)<sp/>{</highlight></codeline>
<codeline lineno="271"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sal_op_release(lf-&gt;insub);</highlight></codeline>
<codeline lineno="272"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lf-&gt;insub=NULL;</highlight></codeline>
<codeline lineno="273"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="274"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(lf-&gt;outsub){</highlight></codeline>
<codeline lineno="275"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sal_op_release(lf-&gt;outsub);</highlight></codeline>
<codeline lineno="276"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lf-&gt;outsub=NULL;</highlight></codeline>
<codeline lineno="277"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="278"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(lf-&gt;presence<sp/>!=<sp/>NULL)<sp/><ref refid="group__buddy__list_1ga3cc09d589693edc3e6f677c4e6e78776" kindref="member">sephone_presence_model_unref</ref>(lf-&gt;presence);</highlight></codeline>
<codeline lineno="279"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(lf-&gt;uri!=NULL)<sp/><ref refid="group__sephone__address_1ga3fe5d8eb9c373045efe9ae9e15458459" kindref="member">sephone_address_destroy</ref>(lf-&gt;uri);</highlight></codeline>
<codeline lineno="280"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(lf-&gt;info!=NULL)<sp/>buddy_info_free(lf-&gt;info);</highlight></codeline>
<codeline lineno="281"><highlight class="normal">}</highlight></codeline>
<codeline lineno="282"><highlight class="normal"></highlight></codeline>
<codeline lineno="283"><highlight class="normal"></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="group__sephone__address_1ga55f07568eee2ed418e36ed9781cf2e23" kindref="member">SephoneAddress</ref><sp/>*<ref refid="group__buddy__list_1ga6e40fe5bfee602b8cedb37a62f3052cb" kindref="member">sephone_friend_get_address</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref><sp/>*lf){</highlight></codeline>
<codeline lineno="284"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>lf-&gt;uri;</highlight></codeline>
<codeline lineno="285"><highlight class="normal">}</highlight></codeline>
<codeline lineno="286"><highlight class="normal"></highlight></codeline>
<codeline lineno="287"><highlight class="normal"></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*<sp/><ref refid="group__buddy__list_1ga1c7453d9bc03bcca109e4a03857dc36e" kindref="member">sephone_friend_get_name</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref><sp/>*lf)<sp/>{</highlight></codeline>
<codeline lineno="288"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__sephone__address_1ga55f07568eee2ed418e36ed9781cf2e23" kindref="member">SephoneAddress</ref><sp/>*fr<sp/>=<sp/>lf-&gt;uri;</highlight></codeline>
<codeline lineno="289"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(fr<sp/>==<sp/>NULL)<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>NULL;</highlight></codeline>
<codeline lineno="290"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__sephone__address_1ga685a3bd1f89dd9ec9e51d8af9515ce0a" kindref="member">sephone_address_get_display_name</ref>(fr);</highlight></codeline>
<codeline lineno="291"><highlight class="normal">}</highlight></codeline>
<codeline lineno="292"><highlight class="normal"></highlight></codeline>
<codeline lineno="293"><highlight class="normal">bool_t<sp/>sephone_friend_get_send_subscribe(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref><sp/>*lf){</highlight></codeline>
<codeline lineno="294"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>lf-&gt;subscribe;</highlight></codeline>
<codeline lineno="295"><highlight class="normal">}</highlight></codeline>
<codeline lineno="296"><highlight class="normal"></highlight></codeline>
<codeline lineno="297"><highlight class="normal"><ref refid="group__buddy__list_1ga913a5506d8bd5d530d8a5ad92d5fd75c" kindref="member">SephoneSubscribePolicy</ref><sp/><ref refid="group__buddy__list_1ga5e21e1a8382337e4604b9d745605d866" kindref="member">sephone_friend_get_inc_subscribe_policy</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref><sp/>*lf){</highlight></codeline>
<codeline lineno="298"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>lf-&gt;pol;</highlight></codeline>
<codeline lineno="299"><highlight class="normal">}</highlight></codeline>
<codeline lineno="300"><highlight class="normal"></highlight></codeline>
<codeline lineno="301"><highlight class="normal"><ref refid="group__buddy__list_1ga751cee710246d233b3a4e0ebd2840298" kindref="member">SephoneOnlineStatus</ref><sp/><ref refid="group__buddy__list_1gae04082c3d1e32e22bc58bea2ba8a08d2" kindref="member">sephone_friend_get_status</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref><sp/>*lf){</highlight></codeline>
<codeline lineno="302"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__buddy__list_1ga751cee710246d233b3a4e0ebd2840298" kindref="member">SephoneOnlineStatus</ref><sp/>online_status<sp/>=<sp/><ref refid="group__buddy__list_1gga7d8d36be33ebac1ef82e55a06d6f0bf5ae218d739af22565632105aa805f2f0f5" kindref="member">SephoneStatusOffline</ref>;</highlight></codeline>
<codeline lineno="303"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__buddy__list_1gac12df3a13fcc3c8d9ce6f7086c870c15" kindref="member">SephonePresenceBasicStatus</ref><sp/>basic_status<sp/>=<sp/><ref refid="group__buddy__list_1ggac12df3a13fcc3c8d9ce6f7086c870c15a3980a8c9bde7b687de99df4374334261" kindref="member">SephonePresenceBasicStatusClosed</ref>;</highlight></codeline>
<codeline lineno="304"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__buddy__list_1ga5a4f2d24bb7a1dcfee6cfe41ee5d2d88" kindref="member">SephonePresenceActivity</ref><sp/>*activity<sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="305"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>nb_activities<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="306"><highlight class="normal"></highlight></codeline>
<codeline lineno="307"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(lf-&gt;presence<sp/>!=<sp/>NULL)<sp/>{</highlight></codeline>
<codeline lineno="308"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>basic_status<sp/>=<sp/><ref refid="group__buddy__list_1gaba16b9a93b57ef052f05905ac1a870c0" kindref="member">sephone_presence_model_get_basic_status</ref>(lf-&gt;presence);</highlight></codeline>
<codeline lineno="309"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>nb_activities<sp/>=<sp/><ref refid="group__buddy__list_1ga28de138dd07fe37602f88982b6bd072c" kindref="member">sephone_presence_model_get_nb_activities</ref>(lf-&gt;presence);</highlight></codeline>
<codeline lineno="310"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>online_status<sp/>=<sp/>(basic_status<sp/>==<sp/><ref refid="group__buddy__list_1ggac12df3a13fcc3c8d9ce6f7086c870c15ae0a3997302a7cbb7997a228a7ff8643c" kindref="member">SephonePresenceBasicStatusOpen</ref>)<sp/>?<sp/><ref refid="group__buddy__list_1gga7d8d36be33ebac1ef82e55a06d6f0bf5aa3f34eb8311e2c07d774b4211e27a640" kindref="member">SephoneStatusOnline</ref><sp/>:<sp/><ref refid="group__buddy__list_1gga7d8d36be33ebac1ef82e55a06d6f0bf5ae218d739af22565632105aa805f2f0f5" kindref="member">SephoneStatusOffline</ref>;</highlight></codeline>
<codeline lineno="311"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(nb_activities<sp/>&gt;<sp/>1)<sp/>{</highlight></codeline>
<codeline lineno="312"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*tmp<sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="313"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="group__sephone__address_1ga55f07568eee2ed418e36ed9781cf2e23" kindref="member">SephoneAddress</ref><sp/>*addr<sp/>=<sp/><ref refid="group__buddy__list_1ga6e40fe5bfee602b8cedb37a62f3052cb" kindref="member">sephone_friend_get_address</ref>(lf);</highlight></codeline>
<codeline lineno="314"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(addr)<sp/>tmp<sp/>=<sp/><ref refid="group__sephone__address_1gaaaff8fab60951d670b48afe2ea015e5f" kindref="member">sephone_address_as_string</ref>(addr);</highlight></codeline>
<codeline lineno="315"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ms_warning(</highlight><highlight class="stringliteral">&quot;Friend<sp/>%s<sp/>has<sp/>several<sp/>activities,<sp/>get<sp/>status<sp/>from<sp/>the<sp/>first<sp/>one&quot;</highlight><highlight class="normal">,<sp/>tmp<sp/>?<sp/>tmp<sp/>:<sp/></highlight><highlight class="stringliteral">&quot;unknown&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="316"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(tmp)<sp/>ms_free(tmp);</highlight></codeline>
<codeline lineno="317"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>nb_activities<sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="318"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="319"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(nb_activities<sp/>==<sp/>1)<sp/>{</highlight></codeline>
<codeline lineno="320"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>activity<sp/>=<sp/><ref refid="group__buddy__list_1ga82f92cacf18c9c2ec3b60b00226fb8a4" kindref="member">sephone_presence_model_get_activity</ref>(lf-&gt;presence);</highlight></codeline>
<codeline lineno="321"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(<ref refid="group__buddy__list_1ga8148aaa10006c6ac4b4207681230b6d4" kindref="member">sephone_presence_activity_get_type</ref>(activity))<sp/>{</highlight></codeline>
<codeline lineno="322"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1gga926b4918657c790b1db2de10a6fd9726a0520ec5ab946fa3274524b6d90dea9bb" kindref="member">SephonePresenceActivityBreakfast</ref>:</highlight></codeline>
<codeline lineno="323"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1gga926b4918657c790b1db2de10a6fd9726a6bf6bbbcdc7a05a6919d306332aa96fc" kindref="member">SephonePresenceActivityDinner</ref>:</highlight></codeline>
<codeline lineno="324"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1gga926b4918657c790b1db2de10a6fd9726a3c0687ac4b003b85e4470eb57d734654" kindref="member">SephonePresenceActivityLunch</ref>:</highlight></codeline>
<codeline lineno="325"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1gga926b4918657c790b1db2de10a6fd9726ac4494318562f3908c533c1a215682583" kindref="member">SephonePresenceActivityMeal</ref>:</highlight></codeline>
<codeline lineno="326"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>online_status<sp/>=<sp/><ref refid="group__buddy__list_1gga7d8d36be33ebac1ef82e55a06d6f0bf5a4bfb5eed599144e6a1c521db5bd5b56c" kindref="member">SephoneStatusOutToLunch</ref>;</highlight></codeline>
<codeline lineno="327"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="328"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1gga926b4918657c790b1db2de10a6fd9726aeec969d613e4a468f365d5addd3e684f" kindref="member">SephonePresenceActivityAppointment</ref>:</highlight></codeline>
<codeline lineno="329"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1gga926b4918657c790b1db2de10a6fd9726aebb95dbfff44c3283a618cf170f1b18a" kindref="member">SephonePresenceActivityMeeting</ref>:</highlight></codeline>
<codeline lineno="330"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1gga926b4918657c790b1db2de10a6fd9726a2e51cf143f776d2af503c117122d8cdb" kindref="member">SephonePresenceActivityPerformance</ref>:</highlight></codeline>
<codeline lineno="331"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1gga926b4918657c790b1db2de10a6fd9726ae6aac7a98f0a981829e8d15f467f7aa6" kindref="member">SephonePresenceActivityPresentation</ref>:</highlight></codeline>
<codeline lineno="332"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1gga926b4918657c790b1db2de10a6fd9726acff507a8c16445ec708bddfe9849a924" kindref="member">SephonePresenceActivitySpectator</ref>:</highlight></codeline>
<codeline lineno="333"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1gga926b4918657c790b1db2de10a6fd9726af3295885e5fc47c42d08cdb2f47ecbf1" kindref="member">SephonePresenceActivityWorking</ref>:</highlight></codeline>
<codeline lineno="334"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1gga926b4918657c790b1db2de10a6fd9726a5c8720cbb71b0ad8751bbcf682fd03c9" kindref="member">SephonePresenceActivityWorship</ref>:</highlight></codeline>
<codeline lineno="335"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>online_status<sp/>=<sp/><ref refid="group__buddy__list_1gga7d8d36be33ebac1ef82e55a06d6f0bf5ab5c684ac2645d7a6c05be24ca0d87a47" kindref="member">SephoneStatusDoNotDisturb</ref>;</highlight></codeline>
<codeline lineno="336"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="337"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1gga926b4918657c790b1db2de10a6fd9726a3fe46801e3e6e352989ba84d78a9c3fa" kindref="member">SephonePresenceActivityAway</ref>:</highlight></codeline>
<codeline lineno="338"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1gga926b4918657c790b1db2de10a6fd9726ac7fc2de453f0b50d7ada25752225f95c" kindref="member">SephonePresenceActivitySleeping</ref>:</highlight></codeline>
<codeline lineno="339"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>online_status<sp/>=<sp/><ref refid="group__buddy__list_1gga7d8d36be33ebac1ef82e55a06d6f0bf5ac453ea75e9922af1054e31bbdb14261a" kindref="member">SephoneStatusAway</ref>;</highlight></codeline>
<codeline lineno="340"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="341"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1gga926b4918657c790b1db2de10a6fd9726a0cb52ac9b493b181ffa478520848155f" kindref="member">SephonePresenceActivityHoliday</ref>:</highlight></codeline>
<codeline lineno="342"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1gga926b4918657c790b1db2de10a6fd9726ab1328b1a7721c2cd00bed5aeea82b9cb" kindref="member">SephonePresenceActivityTravel</ref>:</highlight></codeline>
<codeline lineno="343"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1gga926b4918657c790b1db2de10a6fd9726ae93bbbbec4ec02aa22e3e32e9e9f5fd3" kindref="member">SephonePresenceActivityVacation</ref>:</highlight></codeline>
<codeline lineno="344"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>online_status<sp/>=<sp/><ref refid="group__buddy__list_1gga7d8d36be33ebac1ef82e55a06d6f0bf5a165a53c795910a788a3aa0efc6f28275" kindref="member">SephoneStatusVacation</ref>;</highlight></codeline>
<codeline lineno="345"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="346"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1gga926b4918657c790b1db2de10a6fd9726a4e5832607c248c62f164ac0822e0e781" kindref="member">SephonePresenceActivityBusy</ref>:</highlight></codeline>
<codeline lineno="347"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1gga926b4918657c790b1db2de10a6fd9726a42e4767705c29e58d749412b15994959" kindref="member">SephonePresenceActivityLookingForWork</ref>:</highlight></codeline>
<codeline lineno="348"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1gga926b4918657c790b1db2de10a6fd9726a6f527a38fdf6512cfabf0ccd7207c00d" kindref="member">SephonePresenceActivityPlaying</ref>:</highlight></codeline>
<codeline lineno="349"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1gga926b4918657c790b1db2de10a6fd9726aead84d838f865bb71d6d2737748dcc22" kindref="member">SephonePresenceActivityShopping</ref>:</highlight></codeline>
<codeline lineno="350"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1gga926b4918657c790b1db2de10a6fd9726a5b6a79b2a57f0aea380525ce9f3e826f" kindref="member">SephonePresenceActivityTV</ref>:</highlight></codeline>
<codeline lineno="351"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>online_status<sp/>=<sp/><ref refid="group__buddy__list_1gga7d8d36be33ebac1ef82e55a06d6f0bf5af727dbd3079926a115b70fca7bcc8bef" kindref="member">SephoneStatusBusy</ref>;</highlight></codeline>
<codeline lineno="352"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="353"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1gga926b4918657c790b1db2de10a6fd9726a40cfafc37d0eda971107bffb3d25e725" kindref="member">SephonePresenceActivityInTransit</ref>:</highlight></codeline>
<codeline lineno="354"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1gga926b4918657c790b1db2de10a6fd9726a2c759da467aaac794961605327a30243" kindref="member">SephonePresenceActivitySteering</ref>:</highlight></codeline>
<codeline lineno="355"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>online_status<sp/>=<sp/><ref refid="group__buddy__list_1gga7d8d36be33ebac1ef82e55a06d6f0bf5a82f11dc225e1eee499c9a9db33da26eb" kindref="member">SephoneStatusBeRightBack</ref>;</highlight></codeline>
<codeline lineno="356"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="357"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1gga926b4918657c790b1db2de10a6fd9726acd0157fdcb5f2e6a2bfa19cbd9cf1dd5" kindref="member">SephonePresenceActivityOnThePhone</ref>:</highlight></codeline>
<codeline lineno="358"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>online_status<sp/>=<sp/><ref refid="group__buddy__list_1gga7d8d36be33ebac1ef82e55a06d6f0bf5abcea37fc14d890ed7ce2d82c59dc5c45" kindref="member">SephoneStatusOnThePhone</ref>;</highlight></codeline>
<codeline lineno="359"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="360"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1gga926b4918657c790b1db2de10a6fd9726a828991e9c04ee9b8ac275342fce5e1ee" kindref="member">SephonePresenceActivityOther</ref>:</highlight></codeline>
<codeline lineno="361"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1gga926b4918657c790b1db2de10a6fd9726a876be9b7cccb33c0b2934153dc6c6e6d" kindref="member">SephonePresenceActivityPermanentAbsence</ref>:</highlight></codeline>
<codeline lineno="362"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>online_status<sp/>=<sp/><ref refid="group__buddy__list_1gga7d8d36be33ebac1ef82e55a06d6f0bf5a8d19e63aaeb4f15e7b12ca587bffefd5" kindref="member">SephoneStatusMoved</ref>;</highlight></codeline>
<codeline lineno="363"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="364"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1gga926b4918657c790b1db2de10a6fd9726aed646fadb700ebc3a59cbb1ce2fae65e" kindref="member">SephonePresenceActivityUnknown</ref>:</highlight></codeline>
<codeline lineno="365"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Rely<sp/>on<sp/>the<sp/>basic<sp/>status<sp/>information.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="366"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="367"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1gga926b4918657c790b1db2de10a6fd9726ae05424427b8d035b32d1d42219f223ba" kindref="member">SephonePresenceActivityOnline</ref>:</highlight></codeline>
<codeline lineno="368"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Should<sp/>not<sp/>happen!<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="369"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ms_warning(</highlight><highlight class="stringliteral">&quot;SephonePresenceActivityOnline<sp/>should<sp/>not<sp/>happen<sp/>here!&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="370"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="371"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1gga926b4918657c790b1db2de10a6fd9726a48278908a7598d2ef537c4bf7b3e29a0" kindref="member">SephonePresenceActivityOffline</ref>:</highlight></codeline>
<codeline lineno="372"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>online_status<sp/>=<sp/><ref refid="group__buddy__list_1gga7d8d36be33ebac1ef82e55a06d6f0bf5ae218d739af22565632105aa805f2f0f5" kindref="member">SephoneStatusOffline</ref>;</highlight></codeline>
<codeline lineno="373"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="374"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="375"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="376"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="377"><highlight class="normal"></highlight></codeline>
<codeline lineno="378"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>online_status;</highlight></codeline>
<codeline lineno="379"><highlight class="normal">}</highlight></codeline>
<codeline lineno="380"><highlight class="normal"></highlight></codeline>
<codeline lineno="381"><highlight class="normal"></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="struct__SephonePresenceModel" kindref="compound">SephonePresenceModel</ref><sp/>*<sp/><ref refid="group__buddy__list_1ga6e132b8f2c29525e24365ae946d8be6a" kindref="member">sephone_friend_get_presence_model</ref>(<ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref><sp/>*lf)<sp/>{</highlight></codeline>
<codeline lineno="382"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>lf-&gt;presence;</highlight></codeline>
<codeline lineno="383"><highlight class="normal">}</highlight></codeline>
<codeline lineno="384"><highlight class="normal"></highlight></codeline>
<codeline lineno="385"><highlight class="normal">BuddyInfo<sp/>*<sp/>sephone_friend_get_info(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref><sp/>*lf){</highlight></codeline>
<codeline lineno="386"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>lf-&gt;info;</highlight></codeline>
<codeline lineno="387"><highlight class="normal">}</highlight></codeline>
<codeline lineno="388"><highlight class="normal"></highlight></codeline>
<codeline lineno="389"><highlight class="normal"></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="390"><highlight class="comment"><sp/>*<sp/>updates<sp/>the<sp/>subscriptions.</highlight></codeline>
<codeline lineno="391"><highlight class="comment"><sp/>*<sp/>If<sp/>only_when_registered<sp/>is<sp/>TRUE,<sp/>subscribe<sp/>will<sp/>be<sp/>sent<sp/>only<sp/>if<sp/>the<sp/>friend&apos;s<sp/>corresponding<sp/>proxy<sp/>config<sp/>is<sp/>in<sp/>registered.</highlight></codeline>
<codeline lineno="392"><highlight class="comment"><sp/>*<sp/>Otherwise<sp/>if<sp/>the<sp/>proxy<sp/>config<sp/>goes<sp/>to<sp/>unregistered<sp/>state,<sp/>the<sp/>subscription<sp/>refresh<sp/>will<sp/>be<sp/>suspended.</highlight></codeline>
<codeline lineno="393"><highlight class="comment"><sp/>*<sp/>An<sp/>optional<sp/>proxy<sp/>whose<sp/>state<sp/>has<sp/>changed<sp/>can<sp/>be<sp/>passed<sp/>to<sp/>optimize<sp/>the<sp/>processing.</highlight></codeline>
<codeline lineno="394"><highlight class="comment">**/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="395"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>sephone_friend_update_subscribes(<ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref><sp/>*fr,<sp/><ref refid="group__proxies_1ga6de67319de408cf5e0994375df31f431" kindref="member">SephoneProxyConfig</ref><sp/>*proxy,<sp/>bool_t<sp/>only_when_registered){</highlight></codeline>
<codeline lineno="396"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>can_subscribe=1;</highlight></codeline>
<codeline lineno="397"><highlight class="normal"></highlight></codeline>
<codeline lineno="398"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(only_when_registered<sp/>&amp;&amp;<sp/>(fr-&gt;subscribe<sp/>||<sp/>fr-&gt;subscribe_active)){</highlight></codeline>
<codeline lineno="399"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__proxies_1ga6de67319de408cf5e0994375df31f431" kindref="member">SephoneProxyConfig</ref><sp/>*cfg=sephone_core_lookup_known_proxy(fr-&gt;lc,fr-&gt;uri);</highlight></codeline>
<codeline lineno="400"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(proxy<sp/>&amp;&amp;<sp/>proxy!=cfg)<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="401"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(cfg<sp/>&amp;&amp;<sp/>cfg-&gt;state!=<ref refid="group__proxies_1ggaa85b33997ae5db6878eb6b0b89fb8fc5a48da6899358a2902aeb15bb82c4705a0" kindref="member">SephoneRegistrationOk</ref>){</highlight></codeline>
<codeline lineno="402"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*tmp=<ref refid="group__sephone__address_1gaaaff8fab60951d670b48afe2ea015e5f" kindref="member">sephone_address_as_string</ref>(fr-&gt;uri);</highlight></codeline>
<codeline lineno="403"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ms_message(</highlight><highlight class="stringliteral">&quot;Friend<sp/>[%s]<sp/>belongs<sp/>to<sp/>proxy<sp/>config<sp/>with<sp/>identity<sp/>[%s],<sp/>but<sp/>this<sp/>one<sp/>isn&apos;t<sp/>registered.<sp/>Subscription<sp/>is<sp/>suspended.&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="404"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tmp,<ref refid="group__proxies_1ga4858956a94384d8234b0f36195304399" kindref="member">sephone_proxy_config_get_identity</ref>(cfg));</highlight></codeline>
<codeline lineno="405"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ms_free(tmp);</highlight></codeline>
<codeline lineno="406"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>can_subscribe=0;</highlight></codeline>
<codeline lineno="407"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="408"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="409"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(can_subscribe<sp/>&amp;&amp;<sp/>fr-&gt;subscribe<sp/>&amp;&amp;<sp/>fr-&gt;subscribe_active==FALSE){</highlight></codeline>
<codeline lineno="410"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ms_message(</highlight><highlight class="stringliteral">&quot;Sending<sp/>a<sp/>new<sp/>SUBSCRIBE&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="411"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>__sephone_friend_do_subscribe(fr);</highlight></codeline>
<codeline lineno="412"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(can_subscribe<sp/>&amp;&amp;<sp/>fr-&gt;subscribe_active<sp/>&amp;&amp;<sp/>!fr-&gt;subscribe){</highlight></codeline>
<codeline lineno="413"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sephone_friend_unsubscribe(fr);</highlight></codeline>
<codeline lineno="414"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!can_subscribe<sp/>&amp;&amp;<sp/>fr-&gt;outsub){</highlight></codeline>
<codeline lineno="415"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fr-&gt;subscribe_active=FALSE;</highlight></codeline>
<codeline lineno="416"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sal_op_stop_refreshing(fr-&gt;outsub);</highlight></codeline>
<codeline lineno="417"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="418"><highlight class="normal">}</highlight></codeline>
<codeline lineno="419"><highlight class="normal"></highlight></codeline>
<codeline lineno="420"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>sephone_friend_apply(<ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref><sp/>*fr,<sp/><ref refid="group__initializing_1ga1c39f5ce369d188892c11e63b93d66ca" kindref="member">SephoneCore</ref><sp/>*lc){</highlight></codeline>
<codeline lineno="421"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="struct__SephonePresenceModel" kindref="compound">SephonePresenceModel</ref><sp/>*model;</highlight></codeline>
<codeline lineno="422"><highlight class="normal"></highlight></codeline>
<codeline lineno="423"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(fr-&gt;uri==NULL)<sp/>{</highlight></codeline>
<codeline lineno="424"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ms_warning(</highlight><highlight class="stringliteral">&quot;No<sp/>sip<sp/>url<sp/>defined.&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="425"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="426"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="427"><highlight class="normal"></highlight></codeline>
<codeline lineno="428"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sephone_core_write_friends_config(lc);</highlight></codeline>
<codeline lineno="429"><highlight class="normal"></highlight></codeline>
<codeline lineno="430"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(fr-&gt;inc_subscribe_pending){</highlight></codeline>
<codeline lineno="431"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal">(fr-&gt;pol){</highlight></codeline>
<codeline lineno="432"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1gga2839a15fda61daa92ba614e68bd0662aa60dd7354d0d092ce7b55acb8da75e866" kindref="member">SephoneSPWait</ref>:</highlight></codeline>
<codeline lineno="433"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>model<sp/>=<sp/><ref refid="group__buddy__list_1gaa4e2480945361e52ea662bcc0ea019fc" kindref="member">sephone_presence_model_new_with_activity</ref>(<ref refid="group__buddy__list_1gga926b4918657c790b1db2de10a6fd9726a828991e9c04ee9b8ac275342fce5e1ee" kindref="member">SephonePresenceActivityOther</ref>,<sp/></highlight><highlight class="stringliteral">&quot;Waiting<sp/>for<sp/>user<sp/>acceptance&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="434"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sephone_friend_notify(fr,model);</highlight></codeline>
<codeline lineno="435"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__buddy__list_1ga3cc09d589693edc3e6f677c4e6e78776" kindref="member">sephone_presence_model_unref</ref>(model);</highlight></codeline>
<codeline lineno="436"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="437"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1gga2839a15fda61daa92ba614e68bd0662aa2199de9d8d5138e2ad5537068d94838a" kindref="member">SephoneSPAccept</ref>:</highlight></codeline>
<codeline lineno="438"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(fr-&gt;lc!=NULL)</highlight></codeline>
<codeline lineno="439"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sephone_friend_notify(fr,fr-&gt;lc-&gt;presence_model);</highlight></codeline>
<codeline lineno="440"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="441"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1gga2839a15fda61daa92ba614e68bd0662aa6142e5bdbb5d9409b6585043db122576" kindref="member">SephoneSPDeny</ref>:</highlight></codeline>
<codeline lineno="442"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sephone_friend_notify(fr,NULL);</highlight></codeline>
<codeline lineno="443"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="444"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="445"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fr-&gt;inc_subscribe_pending=FALSE;</highlight></codeline>
<codeline lineno="446"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="447"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(fr-&gt;lc)</highlight></codeline>
<codeline lineno="448"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sephone_friend_update_subscribes(fr,NULL,sephone_core_should_subscribe_friends_only_when_registered(fr-&gt;lc));</highlight></codeline>
<codeline lineno="449"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ms_message(</highlight><highlight class="stringliteral">&quot;sephone_friend_apply()<sp/>done.&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="450"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lc-&gt;bl_refresh=TRUE;</highlight></codeline>
<codeline lineno="451"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fr-&gt;commit=FALSE;</highlight></codeline>
<codeline lineno="452"><highlight class="normal">}</highlight></codeline>
<codeline lineno="453"><highlight class="normal"></highlight></codeline>
<codeline lineno="454"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1gaa816e1ffe0e2021e05e72e12f7356b0a" kindref="member">sephone_friend_edit</ref>(<ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref><sp/>*fr){</highlight></codeline>
<codeline lineno="455"><highlight class="normal">}</highlight></codeline>
<codeline lineno="456"><highlight class="normal"></highlight></codeline>
<codeline lineno="457"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1ga862cf6dbecb8284ad1ea5d249e955180" kindref="member">sephone_friend_done</ref>(<ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref><sp/>*fr){</highlight></codeline>
<codeline lineno="458"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ms_return_if_fail(fr!=NULL);</highlight></codeline>
<codeline lineno="459"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(fr-&gt;lc==NULL)<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="460"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sephone_friend_apply(fr,fr-&gt;lc);</highlight></codeline>
<codeline lineno="461"><highlight class="normal">}</highlight></codeline>
<codeline lineno="462"><highlight class="normal"></highlight></codeline>
<codeline lineno="463"><highlight class="normal"><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref><sp/>*<sp/><ref refid="group__buddy__list_1ga0b5cb590a6b6c57c9a45dc26f314d8c3" kindref="member">sephone_core_create_friend</ref>(<ref refid="group__initializing_1ga1c39f5ce369d188892c11e63b93d66ca" kindref="member">SephoneCore</ref><sp/>*lc)<sp/>{</highlight></codeline>
<codeline lineno="464"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1ga55657aa5ea2ecfb3b387061869028e89" kindref="member">sephone_friend_new</ref>();</highlight></codeline>
<codeline lineno="465"><highlight class="normal">}</highlight></codeline>
<codeline lineno="466"><highlight class="normal"></highlight></codeline>
<codeline lineno="467"><highlight class="normal"><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref><sp/>*<sp/><ref refid="group__buddy__list_1gadf04ea88cdcac931a728fdbe94adae79" kindref="member">sephone_core_create_friend_with_address</ref>(<ref refid="group__initializing_1ga1c39f5ce369d188892c11e63b93d66ca" kindref="member">SephoneCore</ref><sp/>*lc,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*address)<sp/>{</highlight></codeline>
<codeline lineno="468"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1gac799b73ca9a88fcf685fad8c5d7af1a2" kindref="member">sephone_friend_new_with_address</ref>(address);</highlight></codeline>
<codeline lineno="469"><highlight class="normal">}</highlight></codeline>
<codeline lineno="470"><highlight class="normal"></highlight></codeline>
<codeline lineno="471"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1ga13b8aa7cb3599dbcbd6bb796def3c9ee" kindref="member">sephone_core_add_friend</ref>(<ref refid="group__initializing_1ga1c39f5ce369d188892c11e63b93d66ca" kindref="member">SephoneCore</ref><sp/>*lc,<sp/><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref><sp/>*lf)</highlight></codeline>
<codeline lineno="472"><highlight class="normal">{</highlight></codeline>
<codeline lineno="473"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ms_return_if_fail(lf-&gt;lc==NULL);</highlight></codeline>
<codeline lineno="474"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ms_return_if_fail(lf-&gt;uri!=NULL);</highlight></codeline>
<codeline lineno="475"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ms_list_find(lc-&gt;friends,lf)!=NULL){</highlight></codeline>
<codeline lineno="476"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*tmp=NULL;</highlight></codeline>
<codeline lineno="477"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="group__sephone__address_1ga55f07568eee2ed418e36ed9781cf2e23" kindref="member">SephoneAddress</ref><sp/>*addr=<ref refid="group__buddy__list_1ga6e40fe5bfee602b8cedb37a62f3052cb" kindref="member">sephone_friend_get_address</ref>(lf);</highlight></codeline>
<codeline lineno="478"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(addr)<sp/>tmp=<ref refid="group__sephone__address_1gaaaff8fab60951d670b48afe2ea015e5f" kindref="member">sephone_address_as_string</ref>(addr);</highlight></codeline>
<codeline lineno="479"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ms_warning(</highlight><highlight class="stringliteral">&quot;Friend<sp/>%s<sp/>already<sp/>in<sp/>list,<sp/>ignored.&quot;</highlight><highlight class="normal">,<sp/>tmp<sp/>?<sp/>tmp<sp/>:<sp/></highlight><highlight class="stringliteral">&quot;unknown&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="480"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(tmp)<sp/>ms_free(tmp);</highlight></codeline>
<codeline lineno="481"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>return<sp/>;</highlight></codeline>
<codeline lineno="482"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="483"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lc-&gt;friends=ms_list_append(lc-&gt;friends,<ref refid="group__buddy__list_1ga20ae101ca5f5bd64b8e9f12860a2521e" kindref="member">sephone_friend_ref</ref>(lf));</highlight></codeline>
<codeline lineno="484"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lf-&gt;lc=lc;</highlight></codeline>
<codeline lineno="485"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<sp/>sephone_core_ready(lc))<sp/>sephone_friend_apply(lf,lc);</highlight></codeline>
<codeline lineno="486"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>lf-&gt;commit=TRUE;</highlight></codeline>
<codeline lineno="487"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>return<sp/>;</highlight></codeline>
<codeline lineno="488"><highlight class="normal">}</highlight></codeline>
<codeline lineno="489"><highlight class="normal"></highlight></codeline>
<codeline lineno="490"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1gabaedfc6ebdcc23d1068d25e1b4c01a2c" kindref="member">sephone_core_remove_friend</ref>(<ref refid="group__initializing_1ga1c39f5ce369d188892c11e63b93d66ca" kindref="member">SephoneCore</ref><sp/>*lc,<sp/><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref>*<sp/>fl){</highlight></codeline>
<codeline lineno="491"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>MSList<sp/>*el=ms_list_find(lc-&gt;friends,fl);</highlight></codeline>
<codeline lineno="492"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(el!=NULL){</highlight></codeline>
<codeline lineno="493"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__buddy__list_1ga6d35c0b7b22234d84cd22594ecd6e6a1" kindref="member">sephone_friend_destroy</ref>((<ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref>*)el-&gt;data);</highlight></codeline>
<codeline lineno="494"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lc-&gt;friends=ms_list_remove_link(lc-&gt;friends,el);</highlight></codeline>
<codeline lineno="495"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sephone_core_write_friends_config(lc);</highlight></codeline>
<codeline lineno="496"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="497"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ms_error(</highlight><highlight class="stringliteral">&quot;sephone_core_remove_friend():<sp/>friend<sp/>[%p]<sp/>is<sp/>not<sp/>part<sp/>of<sp/>core&apos;s<sp/>list.&quot;</highlight><highlight class="normal">,fl);</highlight></codeline>
<codeline lineno="498"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="499"><highlight class="normal">}</highlight></codeline>
<codeline lineno="500"><highlight class="normal"></highlight></codeline>
<codeline lineno="501"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>sephone_core_update_friends_subscriptions(<ref refid="group__initializing_1ga1c39f5ce369d188892c11e63b93d66ca" kindref="member">SephoneCore</ref><sp/>*lc,<sp/><ref refid="group__proxies_1ga6de67319de408cf5e0994375df31f431" kindref="member">SephoneProxyConfig</ref><sp/>*cfg,<sp/>bool_t<sp/>only_when_registered){</highlight></codeline>
<codeline lineno="502"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>MSList<sp/>*elem;</highlight></codeline>
<codeline lineno="503"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(elem=lc-&gt;friends;elem!=NULL;elem=elem-&gt;next){</highlight></codeline>
<codeline lineno="504"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref><sp/>*f=(<ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref>*)elem-&gt;data;</highlight></codeline>
<codeline lineno="505"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sephone_friend_update_subscribes(f,cfg,only_when_registered);</highlight></codeline>
<codeline lineno="506"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="507"><highlight class="normal">}</highlight></codeline>
<codeline lineno="508"><highlight class="normal"></highlight></codeline>
<codeline lineno="509"><highlight class="normal">bool_t<sp/>sephone_core_should_subscribe_friends_only_when_registered(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="group__initializing_1ga1c39f5ce369d188892c11e63b93d66ca" kindref="member">SephoneCore</ref><sp/>*lc){</highlight></codeline>
<codeline lineno="510"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__misc_1ga3d31ae0b188509173833ba6216499759" kindref="member">sp_config_get_int</ref>(lc-&gt;config,</highlight><highlight class="stringliteral">&quot;sip&quot;</highlight><highlight class="normal">,</highlight><highlight class="stringliteral">&quot;subscribe_presence_only_when_registered&quot;</highlight><highlight class="normal">,1);</highlight></codeline>
<codeline lineno="511"><highlight class="normal">}</highlight></codeline>
<codeline lineno="512"><highlight class="normal"></highlight></codeline>
<codeline lineno="513"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>sephone_core_send_initial_subscribes(<ref refid="group__initializing_1ga1c39f5ce369d188892c11e63b93d66ca" kindref="member">SephoneCore</ref><sp/>*lc){</highlight></codeline>
<codeline lineno="514"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(lc-&gt;initial_subscribes_sent)<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="515"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lc-&gt;initial_subscribes_sent=TRUE;</highlight></codeline>
<codeline lineno="516"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sephone_core_update_friends_subscriptions(lc,NULL,sephone_core_should_subscribe_friends_only_when_registered(lc));</highlight></codeline>
<codeline lineno="517"><highlight class="normal">}</highlight></codeline>
<codeline lineno="518"><highlight class="normal"></highlight></codeline>
<codeline lineno="519"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>sephone_core_invalidate_friend_subscriptions(<ref refid="group__initializing_1ga1c39f5ce369d188892c11e63b93d66ca" kindref="member">SephoneCore</ref><sp/>*lc){</highlight></codeline>
<codeline lineno="520"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>MSList<sp/>*elem;</highlight></codeline>
<codeline lineno="521"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(elem=lc-&gt;friends;elem!=NULL;elem=elem-&gt;next){</highlight></codeline>
<codeline lineno="522"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref><sp/>*f=(<ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref>*)elem-&gt;data;</highlight></codeline>
<codeline lineno="523"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sephone_friend_invalidate_subscription(f);</highlight></codeline>
<codeline lineno="524"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="525"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lc-&gt;initial_subscribes_sent=FALSE;</highlight></codeline>
<codeline lineno="526"><highlight class="normal">}</highlight></codeline>
<codeline lineno="527"><highlight class="normal"></highlight></codeline>
<codeline lineno="528"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1gaf30225f59fa38a143f7d838219ce6e7f" kindref="member">sephone_friend_set_ref_key</ref>(<ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref><sp/>*lf,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*key){</highlight></codeline>
<codeline lineno="529"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(lf-&gt;refkey!=NULL){</highlight></codeline>
<codeline lineno="530"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ms_free(lf-&gt;refkey);</highlight></codeline>
<codeline lineno="531"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lf-&gt;refkey=NULL;</highlight></codeline>
<codeline lineno="532"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="533"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(key)</highlight></codeline>
<codeline lineno="534"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lf-&gt;refkey=ms_strdup(key);</highlight></codeline>
<codeline lineno="535"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(lf-&gt;lc)</highlight></codeline>
<codeline lineno="536"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sephone_core_write_friends_config(lf-&gt;lc);</highlight></codeline>
<codeline lineno="537"><highlight class="normal">}</highlight></codeline>
<codeline lineno="538"><highlight class="normal"></highlight></codeline>
<codeline lineno="539"><highlight class="normal"></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*<ref refid="group__buddy__list_1gaf44896268a3c8e9ed2941cf6ea27b981" kindref="member">sephone_friend_get_ref_key</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref><sp/>*lf){</highlight></codeline>
<codeline lineno="540"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>lf-&gt;refkey;</highlight></codeline>
<codeline lineno="541"><highlight class="normal">}</highlight></codeline>
<codeline lineno="542"><highlight class="normal"></highlight></codeline>
<codeline lineno="543"><highlight class="normal"><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref><sp/>*<ref refid="group__buddy__list_1ga5db709107c46cff4601be65ed9543a4a" kindref="member">sephone_core_find_friend</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="group__initializing_1ga1c39f5ce369d188892c11e63b93d66ca" kindref="member">SephoneCore</ref><sp/>*lc,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="group__sephone__address_1ga55f07568eee2ed418e36ed9781cf2e23" kindref="member">SephoneAddress</ref><sp/>*addr){</highlight></codeline>
<codeline lineno="544"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref><sp/>*lf=NULL;</highlight></codeline>
<codeline lineno="545"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>MSList<sp/>*elem;</highlight></codeline>
<codeline lineno="546"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(elem=lc-&gt;friends;elem!=NULL;elem=ms_list_next(elem)){</highlight></codeline>
<codeline lineno="547"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lf=(<ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref>*)elem-&gt;data;</highlight></codeline>
<codeline lineno="548"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>if<sp/>(<ref refid="group__sephone__address_1gaf14ef4e6e3e317348563039112232768" kindref="member">sephone_address_weak_equal</ref>(lf-&gt;uri,addr))</highlight></codeline>
<codeline lineno="549"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="550"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lf=NULL;</highlight></codeline>
<codeline lineno="551"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="552"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>lf;</highlight></codeline>
<codeline lineno="553"><highlight class="normal">}</highlight></codeline>
<codeline lineno="554"><highlight class="normal"></highlight></codeline>
<codeline lineno="555"><highlight class="normal"><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref><sp/>*<ref refid="group__buddy__list_1ga02b14243ec4dbc68d5c3fd3d2517133a" kindref="member">sephone_core_get_friend_by_address</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="group__initializing_1ga1c39f5ce369d188892c11e63b93d66ca" kindref="member">SephoneCore</ref><sp/>*lc,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*uri){</highlight></codeline>
<codeline lineno="556"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__sephone__address_1ga55f07568eee2ed418e36ed9781cf2e23" kindref="member">SephoneAddress</ref><sp/>*puri=<ref refid="group__sephone__address_1ga96400e0c163c83900928f01aa13df7a6" kindref="member">sephone_address_new</ref>(uri);</highlight></codeline>
<codeline lineno="557"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref><sp/>*lf=puri<sp/>?<sp/><ref refid="group__buddy__list_1ga5db709107c46cff4601be65ed9543a4a" kindref="member">sephone_core_find_friend</ref>(lc,puri)<sp/>:<sp/>NULL;</highlight></codeline>
<codeline lineno="558"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(puri)<sp/><ref refid="group__sephone__address_1gac00d05a6314b7b98bec41261f1e18a9f" kindref="member">sephone_address_unref</ref>(puri);</highlight></codeline>
<codeline lineno="559"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>lf;</highlight></codeline>
<codeline lineno="560"><highlight class="normal">}</highlight></codeline>
<codeline lineno="561"><highlight class="normal"></highlight></codeline>
<codeline lineno="562"><highlight class="normal"><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref><sp/>*<ref refid="group__buddy__list_1gac68438dfa1663d5f49d610592972020e" kindref="member">sephone_core_get_friend_by_ref_key</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="group__initializing_1ga1c39f5ce369d188892c11e63b93d66ca" kindref="member">SephoneCore</ref><sp/>*lc,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*key){</highlight></codeline>
<codeline lineno="563"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>MSList<sp/>*elem;</highlight></codeline>
<codeline lineno="564"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(key==NULL)<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>NULL;</highlight></codeline>
<codeline lineno="565"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(elem=<ref refid="group__buddy__list_1ga283d163c57a101cff7e828237a81d587" kindref="member">sephone_core_get_friend_list</ref>(lc);elem!=NULL;elem=elem-&gt;next){</highlight></codeline>
<codeline lineno="566"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref><sp/>*lf=(<ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref>*)elem-&gt;data;</highlight></codeline>
<codeline lineno="567"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>if<sp/>(lf-&gt;refkey!=NULL<sp/>&amp;&amp;<sp/>strcmp(lf-&gt;refkey,key)==0){</highlight></codeline>
<codeline lineno="568"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>lf;</highlight></codeline>
<codeline lineno="569"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="570"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="571"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>NULL;</highlight></codeline>
<codeline lineno="572"><highlight class="normal">}</highlight></codeline>
<codeline lineno="573"><highlight class="normal"></highlight></codeline>
<codeline lineno="574"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>key_compare(s1,s2)<sp/><sp/><sp/><sp/><sp/><sp/>strcmp(s1,s2)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="575"><highlight class="normal"></highlight></codeline>
<codeline lineno="576"><highlight class="normal"><ref refid="group__buddy__list_1ga913a5506d8bd5d530d8a5ad92d5fd75c" kindref="member">SephoneSubscribePolicy</ref><sp/>__policy_str_to_enum(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal">*<sp/>pol){</highlight></codeline>
<codeline lineno="577"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(key_compare(</highlight><highlight class="stringliteral">&quot;accept&quot;</highlight><highlight class="normal">,pol)==0){</highlight></codeline>
<codeline lineno="578"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1gga2839a15fda61daa92ba614e68bd0662aa2199de9d8d5138e2ad5537068d94838a" kindref="member">SephoneSPAccept</ref>;</highlight></codeline>
<codeline lineno="579"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="580"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(key_compare(</highlight><highlight class="stringliteral">&quot;deny&quot;</highlight><highlight class="normal">,pol)==0){</highlight></codeline>
<codeline lineno="581"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1gga2839a15fda61daa92ba614e68bd0662aa6142e5bdbb5d9409b6585043db122576" kindref="member">SephoneSPDeny</ref>;</highlight></codeline>
<codeline lineno="582"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="583"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(key_compare(</highlight><highlight class="stringliteral">&quot;wait&quot;</highlight><highlight class="normal">,pol)==0){</highlight></codeline>
<codeline lineno="584"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1gga2839a15fda61daa92ba614e68bd0662aa60dd7354d0d092ce7b55acb8da75e866" kindref="member">SephoneSPWait</ref>;</highlight></codeline>
<codeline lineno="585"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="586"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ms_warning(</highlight><highlight class="stringliteral">&quot;Unrecognized<sp/>subscribe<sp/>policy:<sp/>%s&quot;</highlight><highlight class="normal">,pol);</highlight></codeline>
<codeline lineno="587"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1gga2839a15fda61daa92ba614e68bd0662aa60dd7354d0d092ce7b55acb8da75e866" kindref="member">SephoneSPWait</ref>;</highlight></codeline>
<codeline lineno="588"><highlight class="normal">}</highlight></codeline>
<codeline lineno="589"><highlight class="normal"></highlight></codeline>
<codeline lineno="590"><highlight class="normal"><ref refid="group__proxies_1ga6de67319de408cf5e0994375df31f431" kindref="member">SephoneProxyConfig</ref><sp/>*__index_to_proxy(<ref refid="group__initializing_1ga1c39f5ce369d188892c11e63b93d66ca" kindref="member">SephoneCore</ref><sp/>*lc,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>index){</highlight></codeline>
<codeline lineno="591"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(index&gt;=0)<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(<ref refid="group__proxies_1ga6de67319de408cf5e0994375df31f431" kindref="member">SephoneProxyConfig</ref>*)ms_list_nth_data(lc-&gt;sip_conf.proxies,index);</highlight></codeline>
<codeline lineno="592"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>NULL;</highlight></codeline>
<codeline lineno="593"><highlight class="normal">}</highlight></codeline>
<codeline lineno="594"><highlight class="normal"></highlight></codeline>
<codeline lineno="595"><highlight class="normal"><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref><sp/>*<sp/>sephone_friend_new_from_config_file(<ref refid="group__initializing_1ga1c39f5ce369d188892c11e63b93d66ca" kindref="member">SephoneCore</ref><sp/>*lc,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>index){</highlight></codeline>
<codeline lineno="596"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*tmp;</highlight></codeline>
<codeline lineno="597"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>item[50];</highlight></codeline>
<codeline lineno="598"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>a;</highlight></codeline>
<codeline lineno="599"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref><sp/>*lf;</highlight></codeline>
<codeline lineno="600"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__misc_1ga224933b87fd3d0bbcb9b61850ddfa3fb" kindref="member">SpConfig</ref><sp/>*config=lc-&gt;config;</highlight></codeline>
<codeline lineno="601"><highlight class="normal"></highlight></codeline>
<codeline lineno="602"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sprintf(item,</highlight><highlight class="stringliteral">&quot;friend_%i&quot;</highlight><highlight class="normal">,index);</highlight></codeline>
<codeline lineno="603"><highlight class="normal"></highlight></codeline>
<codeline lineno="604"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="group__misc_1ga78dfaae90ffb724dcfe2c0d7f86f88c2" kindref="member">sp_config_has_section</ref>(config,item)){</highlight></codeline>
<codeline lineno="605"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>NULL;</highlight></codeline>
<codeline lineno="606"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="607"><highlight class="normal"></highlight></codeline>
<codeline lineno="608"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tmp=<ref refid="group__misc_1ga5a32540697fb696aa4f306d9dbc844c5" kindref="member">sp_config_get_string</ref>(config,item,</highlight><highlight class="stringliteral">&quot;url&quot;</highlight><highlight class="normal">,NULL);</highlight></codeline>
<codeline lineno="609"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(tmp==NULL)<sp/>{</highlight></codeline>
<codeline lineno="610"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>NULL;</highlight></codeline>
<codeline lineno="611"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="612"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lf=<ref refid="group__buddy__list_1gac799b73ca9a88fcf685fad8c5d7af1a2" kindref="member">sephone_friend_new_with_address</ref>(tmp);</highlight></codeline>
<codeline lineno="613"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(lf==NULL)<sp/>{</highlight></codeline>
<codeline lineno="614"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>NULL;</highlight></codeline>
<codeline lineno="615"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="616"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tmp=<ref refid="group__misc_1ga5a32540697fb696aa4f306d9dbc844c5" kindref="member">sp_config_get_string</ref>(config,item,</highlight><highlight class="stringliteral">&quot;pol&quot;</highlight><highlight class="normal">,NULL);</highlight></codeline>
<codeline lineno="617"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(tmp==NULL)<sp/><ref refid="group__buddy__list_1ga2a06db1ee3bb318d911f3b7c8fa9c5d4" kindref="member">sephone_friend_set_inc_subscribe_policy</ref>(lf,<ref refid="group__buddy__list_1gga2839a15fda61daa92ba614e68bd0662aa60dd7354d0d092ce7b55acb8da75e866" kindref="member">SephoneSPWait</ref>);</highlight></codeline>
<codeline lineno="618"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="619"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__buddy__list_1ga2a06db1ee3bb318d911f3b7c8fa9c5d4" kindref="member">sephone_friend_set_inc_subscribe_policy</ref>(lf,__policy_str_to_enum(tmp));</highlight></codeline>
<codeline lineno="620"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="621"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>a=<ref refid="group__misc_1ga3d31ae0b188509173833ba6216499759" kindref="member">sp_config_get_int</ref>(config,item,</highlight><highlight class="stringliteral">&quot;subscribe&quot;</highlight><highlight class="normal">,0);</highlight></codeline>
<codeline lineno="622"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sephone_friend_send_subscribe(lf,a);</highlight></codeline>
<codeline lineno="623"><highlight class="normal"></highlight></codeline>
<codeline lineno="624"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__buddy__list_1gaf30225f59fa38a143f7d838219ce6e7f" kindref="member">sephone_friend_set_ref_key</ref>(lf,<ref refid="group__misc_1ga5a32540697fb696aa4f306d9dbc844c5" kindref="member">sp_config_get_string</ref>(config,item,</highlight><highlight class="stringliteral">&quot;refkey&quot;</highlight><highlight class="normal">,NULL));</highlight></codeline>
<codeline lineno="625"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>lf;</highlight></codeline>
<codeline lineno="626"><highlight class="normal">}</highlight></codeline>
<codeline lineno="627"><highlight class="normal"></highlight></codeline>
<codeline lineno="628"><highlight class="normal"></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*__policy_enum_to_str(<ref refid="group__buddy__list_1ga913a5506d8bd5d530d8a5ad92d5fd75c" kindref="member">SephoneSubscribePolicy</ref><sp/>pol){</highlight></codeline>
<codeline lineno="629"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal">(pol){</highlight></codeline>
<codeline lineno="630"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1gga2839a15fda61daa92ba614e68bd0662aa2199de9d8d5138e2ad5537068d94838a" kindref="member">SephoneSPAccept</ref>:</highlight></codeline>
<codeline lineno="631"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&quot;accept&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="632"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="633"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1gga2839a15fda61daa92ba614e68bd0662aa6142e5bdbb5d9409b6585043db122576" kindref="member">SephoneSPDeny</ref>:</highlight></codeline>
<codeline lineno="634"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&quot;deny&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="635"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="636"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1gga2839a15fda61daa92ba614e68bd0662aa60dd7354d0d092ce7b55acb8da75e866" kindref="member">SephoneSPWait</ref>:</highlight></codeline>
<codeline lineno="637"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&quot;wait&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="638"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="639"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="640"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ms_warning(</highlight><highlight class="stringliteral">&quot;Invalid<sp/>policy<sp/>enum<sp/>value.&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="641"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&quot;wait&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="642"><highlight class="normal">}</highlight></codeline>
<codeline lineno="643"><highlight class="normal"></highlight></codeline>
<codeline lineno="644"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>sephone_friend_write_to_config_file(<ref refid="group__misc_1ga224933b87fd3d0bbcb9b61850ddfa3fb" kindref="member">SpConfig</ref><sp/>*config,<sp/><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref><sp/>*lf,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>index){</highlight></codeline>
<codeline lineno="645"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>key[50];</highlight></codeline>
<codeline lineno="646"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*tmp;</highlight></codeline>
<codeline lineno="647"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*refkey;</highlight></codeline>
<codeline lineno="648"><highlight class="normal"></highlight></codeline>
<codeline lineno="649"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sprintf(key,</highlight><highlight class="stringliteral">&quot;friend_%i&quot;</highlight><highlight class="normal">,index);</highlight></codeline>
<codeline lineno="650"><highlight class="normal"></highlight></codeline>
<codeline lineno="651"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(lf==NULL){</highlight></codeline>
<codeline lineno="652"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__misc_1ga433e2e6ccd61949f7a7014edcf146d34" kindref="member">sp_config_clean_section</ref>(config,key);</highlight></codeline>
<codeline lineno="653"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="654"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="655"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(lf-&gt;uri!=NULL){</highlight></codeline>
<codeline lineno="656"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>tmp=<ref refid="group__sephone__address_1gaaaff8fab60951d670b48afe2ea015e5f" kindref="member">sephone_address_as_string</ref>(lf-&gt;uri);</highlight></codeline>
<codeline lineno="657"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(tmp==NULL)<sp/>{</highlight></codeline>
<codeline lineno="658"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="659"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="660"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__misc_1gabdc99c184ea0d3a27899d221e0aa8d7a" kindref="member">sp_config_set_string</ref>(config,key,</highlight><highlight class="stringliteral">&quot;url&quot;</highlight><highlight class="normal">,tmp);</highlight></codeline>
<codeline lineno="661"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ms_free(tmp);</highlight></codeline>
<codeline lineno="662"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="663"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__misc_1gabdc99c184ea0d3a27899d221e0aa8d7a" kindref="member">sp_config_set_string</ref>(config,key,</highlight><highlight class="stringliteral">&quot;pol&quot;</highlight><highlight class="normal">,__policy_enum_to_str(lf-&gt;pol));</highlight></codeline>
<codeline lineno="664"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__misc_1ga87891a504455bab6245575a9e01ab86a" kindref="member">sp_config_set_int</ref>(config,key,</highlight><highlight class="stringliteral">&quot;subscribe&quot;</highlight><highlight class="normal">,lf-&gt;subscribe);</highlight></codeline>
<codeline lineno="665"><highlight class="normal"></highlight></codeline>
<codeline lineno="666"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>refkey=<ref refid="group__buddy__list_1gaf44896268a3c8e9ed2941cf6ea27b981" kindref="member">sephone_friend_get_ref_key</ref>(lf);</highlight></codeline>
<codeline lineno="667"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(refkey){</highlight></codeline>
<codeline lineno="668"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__misc_1gabdc99c184ea0d3a27899d221e0aa8d7a" kindref="member">sp_config_set_string</ref>(config,key,</highlight><highlight class="stringliteral">&quot;refkey&quot;</highlight><highlight class="normal">,refkey);</highlight></codeline>
<codeline lineno="669"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="670"><highlight class="normal">}</highlight></codeline>
<codeline lineno="671"><highlight class="normal"></highlight></codeline>
<codeline lineno="672"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>sephone_core_write_friends_config(<ref refid="group__initializing_1ga1c39f5ce369d188892c11e63b93d66ca" kindref="member">SephoneCore</ref>*<sp/>lc)</highlight></codeline>
<codeline lineno="673"><highlight class="normal">{</highlight></codeline>
<codeline lineno="674"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>MSList<sp/>*elem;</highlight></codeline>
<codeline lineno="675"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i;</highlight></codeline>
<codeline lineno="676"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<sp/>sephone_core_ready(lc))<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;<sp/></highlight><highlight class="comment">/*dont<sp/>write<sp/>config<sp/>when<sp/>reading<sp/>it<sp/>!*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="677"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(elem=lc-&gt;friends,i=0;<sp/>elem!=NULL;<sp/>elem=ms_list_next(elem),i++){</highlight></codeline>
<codeline lineno="678"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sephone_friend_write_to_config_file(lc-&gt;config,(<ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref>*)elem-&gt;data,i);</highlight></codeline>
<codeline lineno="679"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="680"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sephone_friend_write_to_config_file(lc-&gt;config,NULL,i);<sp/></highlight><highlight class="comment">/*<sp/>set<sp/>the<sp/>end<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="681"><highlight class="normal">}</highlight></codeline>
<codeline lineno="682"><highlight class="normal"></highlight></codeline>
<codeline lineno="683"><highlight class="normal"><ref refid="group__initializing_1ga1c39f5ce369d188892c11e63b93d66ca" kindref="member">SephoneCore</ref><sp/>*<ref refid="group__buddy__list_1gaf5d3d64ed3a9d203b6dd7e665d539eca" kindref="member">sephone_friend_get_core</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref><sp/>*fr){</highlight></codeline>
<codeline lineno="684"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>fr-&gt;lc;</highlight></codeline>
<codeline lineno="685"><highlight class="normal">}</highlight></codeline>
<codeline lineno="686"><highlight class="normal"></highlight></codeline>
<codeline lineno="687"><highlight class="normal"><ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref><sp/>*<ref refid="group__buddy__list_1ga20ae101ca5f5bd64b8e9f12860a2521e" kindref="member">sephone_friend_ref</ref>(<ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref><sp/>*lf)<sp/>{</highlight></codeline>
<codeline lineno="688"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>belle_sip_object_ref(lf);</highlight></codeline>
<codeline lineno="689"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>lf;</highlight></codeline>
<codeline lineno="690"><highlight class="normal">}</highlight></codeline>
<codeline lineno="691"><highlight class="normal"></highlight></codeline>
<codeline lineno="692"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1gad938f868371c2c5bafdadf9165342039" kindref="member">sephone_friend_unref</ref>(<ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref><sp/>*lf)<sp/>{</highlight></codeline>
<codeline lineno="693"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>belle_sip_object_unref(lf);</highlight></codeline>
<codeline lineno="694"><highlight class="normal">}</highlight></codeline>
<codeline lineno="695"><highlight class="normal"></highlight></codeline>
<codeline lineno="696"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>DEPRECATED<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="697"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="group__buddy__list_1ga6d35c0b7b22234d84cd22594ecd6e6a1" kindref="member">sephone_friend_destroy</ref>(<ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref><sp/>*lf)<sp/>{</highlight></codeline>
<codeline lineno="698"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__buddy__list_1gad938f868371c2c5bafdadf9165342039" kindref="member">sephone_friend_unref</ref>(lf);</highlight></codeline>
<codeline lineno="699"><highlight class="normal">}</highlight></codeline>
<codeline lineno="700"><highlight class="normal"></highlight></codeline>
<codeline lineno="701"><highlight class="normal">BELLE_SIP_DECLARE_NO_IMPLEMENTED_INTERFACES(<ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref>);</highlight></codeline>
<codeline lineno="702"><highlight class="normal"></highlight></codeline>
<codeline lineno="703"><highlight class="normal">BELLE_SIP_INSTANCIATE_VPTR(<ref refid="group__buddy__list_1ga10719a6bde8f550602b683cb577077c9" kindref="member">SephoneFriend</ref>,<sp/>belle_sip_object_t,</highlight></codeline>
<codeline lineno="704"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(belle_sip_object_destroy_t)<sp/>_sephone_friend_destroy,</highlight></codeline>
<codeline lineno="705"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>NULL,<sp/></highlight><highlight class="comment">//<sp/>clone</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="706"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>NULL,<sp/></highlight><highlight class="comment">//<sp/>marshal</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="707"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>FALSE</highlight></codeline>
<codeline lineno="708"><highlight class="normal">);</highlight></codeline>
    </programlisting>
    <location file="/users/andrew/workspaces/linphone/submodules/sephone/coreapi/friend.c"/>
  </compounddef>
</doxygen>
